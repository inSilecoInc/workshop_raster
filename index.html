<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>Raster with R</title>
    <meta charset="utf-8" />
    <meta name="author" content="inSileco Team" />
    <script src="assets/header-attrs-2.6/header-attrs.js"></script>
    <link href="assets/remark-css-0.0.1/default.css" rel="stylesheet" />
    <link href="assets/remark-css-0.0.1/hygge.css" rel="stylesheet" />
    <link href="assets/countdown-0.3.5/countdown.css" rel="stylesheet" />
    <script src="assets/countdown-0.3.5/countdown.js"></script>
    <link rel="stylesheet" href="rd.css" type="text/css" />
    <link rel="stylesheet" href="rd-font.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">







class: title-slide, middle


## .font200[&lt;svg viewBox="0 0 581 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;"&gt;  [ comment ]  &lt;path d="M581 226.6C581 119.1 450.9 32 290.5 32S0 119.1 0 226.6C0 322.4 103.3 402 239.4 418.1V480h99.1v-61.5c24.3-2.7 47.6-7.4 69.4-13.9L448 480h112l-67.4-113.7c54.5-35.4 88.4-84.9 88.4-139.7zm-466.8 14.5c0-73.5 98.9-133 220.8-133s211.9 40.7 211.9 133c0 50.1-26.5 85-70.3 106.4-2.4-1.6-4.7-2.9-6.4-3.7-10.2-5.2-27.8-10.5-27.8-10.5s86.6-6.4 86.6-92.7-90.6-87.9-90.6-87.9h-199V361c-74.1-21.5-125.2-67.1-125.2-119.9zm225.1 38.3v-55.6c57.8 0 87.8-6.8 87.8 27.3 0 36.5-38.2 28.3-87.8 28.3zm-.9 72.5H365c10.8 0 18.9 11.7 24 19.2-16.1 1.9-33 2.8-50.6 2.9v-22.1z"&gt;&lt;/path&gt;&lt;/svg&gt;asters]

&lt;br&gt;

.instructors[
  .font180[Manipulate rasters with &lt;svg viewBox="0 0 581 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;"&gt;  [ comment ]  &lt;path d="M581 226.6C581 119.1 450.9 32 290.5 32S0 119.1 0 226.6C0 322.4 103.3 402 239.4 418.1V480h99.1v-61.5c24.3-2.7 47.6-7.4 69.4-13.9L448 480h112l-67.4-113.7c54.5-35.4 88.4-84.9 88.4-139.7zm-466.8 14.5c0-73.5 98.9-133 220.8-133s211.9 40.7 211.9 133c0 50.1-26.5 85-70.3 106.4-2.4-1.6-4.7-2.9-6.4-3.7-10.2-5.2-27.8-10.5-27.8-10.5s86.6-6.4 86.6-92.7-90.6-87.9-90.6-87.9h-199V361c-74.1-21.5-125.2-67.1-125.2-119.9zm225.1 38.3v-55.6c57.8 0 87.8-6.8 87.8 27.3 0 36.5-38.2 28.3-87.8 28.3zm-.9 72.5H365c10.8 0 18.9 11.7 24 19.2-16.1 1.9-33 2.8-50.6 2.9v-22.1z"&gt;&lt;/path&gt;&lt;/svg&gt;]
  &lt;br&gt;&lt;br&gt;&lt;br&gt;
  .authors140[David Beauchesne &amp; Kevin Cazelles]
  &lt;br&gt;&lt;br&gt;
  January 12, 2021
  &lt;br&gt;
  .font200[
  [&lt;svg viewBox="0 0 496 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;"&gt;  [ comment ]  &lt;path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"&gt;&lt;/path&gt;&lt;/svg&gt;](https://github.com/inSilecoInc)
  [&lt;svg viewBox="0 0 448 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;"&gt;  [ comment ]  &lt;path d="M448 73.143v45.714C448 159.143 347.667 192 224 192S0 159.143 0 118.857V73.143C0 32.857 100.333 0 224 0s224 32.857 224 73.143zM448 176v102.857C448 319.143 347.667 352 224 352S0 319.143 0 278.857V176c48.125 33.143 136.208 48.572 224 48.572S399.874 209.143 448 176zm0 160v102.857C448 479.143 347.667 512 224 512S0 479.143 0 438.857V336c48.125 33.143 136.208 48.572 224 48.572S399.874 369.143 448 336z"&gt;&lt;/path&gt;&lt;/svg&gt;](https://github.com/inSilecoInc/workshop_raster/raw/main/data_and_script.zip)
  [&lt;svg viewBox="0 0 384 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;"&gt;  [ comment ]  &lt;path d="M369.9 97.9L286 14C277 5 264.8-.1 252.1-.1H48C21.5 0 0 21.5 0 48v416c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V131.9c0-12.7-5.1-25-14.1-34zM332.1 128H256V51.9l76.1 76.1zM48 464V48h160v104c0 13.3 10.7 24 24 24h104v288H48zm250.2-143.7c-12.2-12-47-8.7-64.4-6.5-17.2-10.5-28.7-25-36.8-46.3 3.9-16.1 10.1-40.6 5.4-56-4.2-26.2-37.8-23.6-42.6-5.9-4.4 16.1-.4 38.5 7 67.1-10 23.9-24.9 56-35.4 74.4-20 10.3-47 26.2-51 46.2-3.3 15.8 26 55.2 76.1-31.2 22.4-7.4 46.8-16.5 68.4-20.1 18.9 10.2 41 17 55.8 17 25.5 0 28-28.2 17.5-38.7zm-198.1 77.8c5.1-13.7 24.5-29.5 30.4-35-19 30.3-30.4 35.7-30.4 35zm81.6-190.6c7.4 0 6.7 32.1 1.8 40.8-4.4-13.9-4.3-40.8-1.8-40.8zm-24.4 136.6c9.7-16.9 18-37 24.7-54.7 8.3 15.1 18.9 27.2 30.1 35.5-20.8 4.3-38.9 13.1-54.8 19.2zm131.6-5s-5 6-37.3-7.8c35.1-2.6 40.9 5.4 37.3 7.8z"&gt;&lt;/path&gt;&lt;/svg&gt;](https://github.com/inSilecoInc/workshop_raster/raw/main/raster_p1.pdf)
  ]
]

&lt;br&gt;
&lt;img src="img/logoW.png" width="140px"&gt;&lt;/img&gt;

![deploy workshop](https://github.com/inSilecoInc/workshop_raster/workflows/deploy%20workshop/badge.svg)

.instructors[Content under [&lt;svg viewBox="0 0 496 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;"&gt;  [ comment ]  &lt;path d="M245.83 214.87l-33.22 17.28c-9.43-19.58-25.24-19.93-27.46-19.93-22.13 0-33.22 14.61-33.22 43.84 0 23.57 9.21 43.84 33.22 43.84 14.47 0 24.65-7.09 30.57-21.26l30.55 15.5c-6.17 11.51-25.69 38.98-65.1 38.98-22.6 0-73.96-10.32-73.96-77.05 0-58.69 43-77.06 72.63-77.06 30.72-.01 52.7 11.95 65.99 35.86zm143.05 0l-32.78 17.28c-9.5-19.77-25.72-19.93-27.9-19.93-22.14 0-33.22 14.61-33.22 43.84 0 23.55 9.23 43.84 33.22 43.84 14.45 0 24.65-7.09 30.54-21.26l31 15.5c-2.1 3.75-21.39 38.98-65.09 38.98-22.69 0-73.96-9.87-73.96-77.05 0-58.67 42.97-77.06 72.63-77.06 30.71-.01 52.58 11.95 65.56 35.86zM247.56 8.05C104.74 8.05 0 123.11 0 256.05c0 138.49 113.6 248 247.56 248 129.93 0 248.44-100.87 248.44-248 0-137.87-106.62-248-248.44-248zm.87 450.81c-112.54 0-203.7-93.04-203.7-202.81 0-105.42 85.43-203.27 203.72-203.27 112.53 0 202.82 89.46 202.82 203.26-.01 121.69-99.68 202.82-202.84 202.82z"&gt;&lt;/path&gt;&lt;/svg&gt; &lt;svg viewBox="0 0 496 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;"&gt;  [ comment ]  &lt;path d="M314.9 194.4v101.4h-28.3v120.5h-77.1V295.9h-28.3V194.4c0-4.4 1.6-8.2 4.6-11.3 3.1-3.1 6.9-4.7 11.3-4.7H299c4.1 0 7.8 1.6 11.1 4.7 3.1 3.2 4.8 6.9 4.8 11.3zm-101.5-63.7c0-23.3 11.5-35 34.5-35s34.5 11.7 34.5 35c0 23-11.5 34.5-34.5 34.5s-34.5-11.5-34.5-34.5zM247.6 8C389.4 8 496 118.1 496 256c0 147.1-118.5 248-248.4 248C113.6 504 0 394.5 0 256 0 123.1 104.7 8 247.6 8zm.8 44.7C130.2 52.7 44.7 150.6 44.7 256c0 109.8 91.2 202.8 203.7 202.8 103.2 0 202.8-81.1 202.8-202.8.1-113.8-90.2-203.3-202.8-203.3z"&gt;&lt;/path&gt;&lt;/svg&gt;](https://creativecommons.org/licenses/by/4.0/) unless otherwise specified]




---

class: inverse, center, middle

# Learning objectives

![:custom_hr]()

## .font160[&lt;svg viewBox="0 0 576 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;"&gt;  [ comment ]  &lt;path d="M560.02 32c-1.96 0-3.98.37-5.96 1.16L384.01 96H384L212 35.28A64.252 64.252 0 0 0 191.76 32c-6.69 0-13.37 1.05-19.81 3.14L20.12 87.95A32.006 32.006 0 0 0 0 117.66v346.32C0 473.17 7.53 480 15.99 480c1.96 0 3.97-.37 5.96-1.16L192 416l172 60.71a63.98 63.98 0 0 0 40.05.15l151.83-52.81A31.996 31.996 0 0 0 576 394.34V48.02c0-9.19-7.53-16.02-15.98-16.02zM224 90.42l128 45.19v285.97l-128-45.19V90.42zM48 418.05V129.07l128-44.53v286.2l-.64.23L48 418.05zm480-35.13l-128 44.53V141.26l.64-.24L528 93.95v288.97z"&gt;&lt;/path&gt;&lt;/svg&gt;  + &lt;svg viewBox="0 0 581 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;"&gt;  [ comment ]  &lt;path d="M581 226.6C581 119.1 450.9 32 290.5 32S0 119.1 0 226.6C0 322.4 103.3 402 239.4 418.1V480h99.1v-61.5c24.3-2.7 47.6-7.4 69.4-13.9L448 480h112l-67.4-113.7c54.5-35.4 88.4-84.9 88.4-139.7zm-466.8 14.5c0-73.5 98.9-133 220.8-133s211.9 40.7 211.9 133c0 50.1-26.5 85-70.3 106.4-2.4-1.6-4.7-2.9-6.4-3.7-10.2-5.2-27.8-10.5-27.8-10.5s86.6-6.4 86.6-92.7-90.6-87.9-90.6-87.9h-199V361c-74.1-21.5-125.2-67.1-125.2-119.9zm225.1 38.3v-55.6c57.8 0 87.8-6.8 87.8 27.3 0 36.5-38.2 28.3-87.8 28.3zm-.9 72.5H365c10.8 0 18.9 11.7 24 19.2-16.1 1.9-33 2.8-50.6 2.9v-22.1z"&gt;&lt;/path&gt;&lt;/svg&gt;]


---

# Learning objectives

&lt;br&gt;

### Learn how to visualize raster interactively with &lt;svg viewBox="0 0 581 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;"&gt;  [ comment ]  &lt;path d="M581 226.6C581 119.1 450.9 32 290.5 32S0 119.1 0 226.6C0 322.4 103.3 402 239.4 418.1V480h99.1v-61.5c24.3-2.7 47.6-7.4 69.4-13.9L448 480h112l-67.4-113.7c54.5-35.4 88.4-84.9 88.4-139.7zm-466.8 14.5c0-73.5 98.9-133 220.8-133s211.9 40.7 211.9 133c0 50.1-26.5 85-70.3 106.4-2.4-1.6-4.7-2.9-6.4-3.7-10.2-5.2-27.8-10.5-27.8-10.5s86.6-6.4 86.6-92.7-90.6-87.9-90.6-87.9h-199V361c-74.1-21.5-125.2-67.1-125.2-119.9zm225.1 38.3v-55.6c57.8 0 87.8-6.8 87.8 27.3 0 36.5-38.2 28.3-87.8 28.3zm-.9 72.5H365c10.8 0 18.9 11.7 24 19.2-16.1 1.9-33 2.8-50.6 2.9v-22.1z"&gt;&lt;/path&gt;&lt;/svg&gt;

--

1. Understand the benefits of manipulating raster files with &lt;svg viewBox="0 0 581 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;"&gt;  [ comment ]  &lt;path d="M581 226.6C581 119.1 450.9 32 290.5 32S0 119.1 0 226.6C0 322.4 103.3 402 239.4 418.1V480h99.1v-61.5c24.3-2.7 47.6-7.4 69.4-13.9L448 480h112l-67.4-113.7c54.5-35.4 88.4-84.9 88.4-139.7zm-466.8 14.5c0-73.5 98.9-133 220.8-133s211.9 40.7 211.9 133c0 50.1-26.5 85-70.3 106.4-2.4-1.6-4.7-2.9-6.4-3.7-10.2-5.2-27.8-10.5-27.8-10.5s86.6-6.4 86.6-92.7-90.6-87.9-90.6-87.9h-199V361c-74.1-21.5-125.2-67.1-125.2-119.9zm225.1 38.3v-55.6c57.8 0 87.8-6.8 87.8 27.3 0 36.5-38.2 28.3-87.8 28.3zm-.9 72.5H365c10.8 0 18.9 11.7 24 19.2-16.1 1.9-33 2.8-50.6 2.9v-22.1z"&gt;&lt;/path&gt;&lt;/svg&gt;

--

2. Learn how to read and write raster files with &lt;svg viewBox="0 0 581 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;"&gt;  [ comment ]  &lt;path d="M581 226.6C581 119.1 450.9 32 290.5 32S0 119.1 0 226.6C0 322.4 103.3 402 239.4 418.1V480h99.1v-61.5c24.3-2.7 47.6-7.4 69.4-13.9L448 480h112l-67.4-113.7c54.5-35.4 88.4-84.9 88.4-139.7zm-466.8 14.5c0-73.5 98.9-133 220.8-133s211.9 40.7 211.9 133c0 50.1-26.5 85-70.3 106.4-2.4-1.6-4.7-2.9-6.4-3.7-10.2-5.2-27.8-10.5-27.8-10.5s86.6-6.4 86.6-92.7-90.6-87.9-90.6-87.9h-199V361c-74.1-21.5-125.2-67.1-125.2-119.9zm225.1 38.3v-55.6c57.8 0 87.8-6.8 87.8 27.3 0 36.5-38.2 28.3-87.8 28.3zm-.9 72.5H365c10.8 0 18.9 11.7 24 19.2-16.1 1.9-33 2.8-50.6 2.9v-22.1z"&gt;&lt;/path&gt;&lt;/svg&gt;

--

3. Learn how to manipulate rasters &lt;svg viewBox="0 0 581 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;"&gt;  [ comment ]  &lt;path d="M581 226.6C581 119.1 450.9 32 290.5 32S0 119.1 0 226.6C0 322.4 103.3 402 239.4 418.1V480h99.1v-61.5c24.3-2.7 47.6-7.4 69.4-13.9L448 480h112l-67.4-113.7c54.5-35.4 88.4-84.9 88.4-139.7zm-466.8 14.5c0-73.5 98.9-133 220.8-133s211.9 40.7 211.9 133c0 50.1-26.5 85-70.3 106.4-2.4-1.6-4.7-2.9-6.4-3.7-10.2-5.2-27.8-10.5-27.8-10.5s86.6-6.4 86.6-92.7-90.6-87.9-90.6-87.9h-199V361c-74.1-21.5-125.2-67.1-125.2-119.9zm225.1 38.3v-55.6c57.8 0 87.8-6.8 87.8 27.3 0 36.5-38.2 28.3-87.8 28.3zm-.9 72.5H365c10.8 0 18.9 11.7 24 19.2-16.1 1.9-33 2.8-50.6 2.9v-22.1z"&gt;&lt;/path&gt;&lt;/svg&gt;

--

4. Learn how to visualize rasters with &lt;svg viewBox="0 0 581 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;"&gt;  [ comment ]  &lt;path d="M581 226.6C581 119.1 450.9 32 290.5 32S0 119.1 0 226.6C0 322.4 103.3 402 239.4 418.1V480h99.1v-61.5c24.3-2.7 47.6-7.4 69.4-13.9L448 480h112l-67.4-113.7c54.5-35.4 88.4-84.9 88.4-139.7zm-466.8 14.5c0-73.5 98.9-133 220.8-133s211.9 40.7 211.9 133c0 50.1-26.5 85-70.3 106.4-2.4-1.6-4.7-2.9-6.4-3.7-10.2-5.2-27.8-10.5-27.8-10.5s86.6-6.4 86.6-92.7-90.6-87.9-90.6-87.9h-199V361c-74.1-21.5-125.2-67.1-125.2-119.9zm225.1 38.3v-55.6c57.8 0 87.8-6.8 87.8 27.3 0 36.5-38.2 28.3-87.8 28.3zm-.9 72.5H365c10.8 0 18.9 11.7 24 19.2-16.1 1.9-33 2.8-50.6 2.9v-22.1z"&gt;&lt;/path&gt;&lt;/svg&gt;


---

class: inverse, center, middle

# &lt;svg viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;"&gt;  [ comment ]  &lt;path d="M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 110c23.196 0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627 0 12 5.373 12 12v100h12c6.627 0 12 5.373 12 12v24z"&gt;&lt;/path&gt;&lt;/svg&gt; Rationalize

![:custom_hr]()

## Why use &lt;svg viewBox="0 0 581 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;"&gt;  [ comment ]  &lt;path d="M581 226.6C581 119.1 450.9 32 290.5 32S0 119.1 0 226.6C0 322.4 103.3 402 239.4 418.1V480h99.1v-61.5c24.3-2.7 47.6-7.4 69.4-13.9L448 480h112l-67.4-113.7c54.5-35.4 88.4-84.9 88.4-139.7zm-466.8 14.5c0-73.5 98.9-133 220.8-133s211.9 40.7 211.9 133c0 50.1-26.5 85-70.3 106.4-2.4-1.6-4.7-2.9-6.4-3.7-10.2-5.2-27.8-10.5-27.8-10.5s86.6-6.4 86.6-92.7-90.6-87.9-90.6-87.9h-199V361c-74.1-21.5-125.2-67.1-125.2-119.9zm225.1 38.3v-55.6c57.8 0 87.8-6.8 87.8 27.3 0 36.5-38.2 28.3-87.8 28.3zm-.9 72.5H365c10.8 0 18.9 11.7 24 19.2-16.1 1.9-33 2.8-50.6 2.9v-22.1z"&gt;&lt;/path&gt;&lt;/svg&gt; for rasters? (~15min)


???

If after the workshop what follows makes sense and you feel it is kind of true, it would a success. 




---

# Raster files 

&gt; Raster files are grids of equally sized (most often) cells (or pixels).

--

&gt; Every cell has one or several values (or missing values).

--

&gt; Cells are georeferenced: coordinates + CRS 

--

&gt; Commonly used to represent continuous phenomena (e.g. temperature, elevation) and images (airborne or satellite imagery).




---
# Raster files 

- Examples of raster file formats: 

  - **GeoTIFF** (see https://trac.osgeo.org/geotiff)
  - **NetCDF** (see https://www.unidata.ucar.edu/software/netcdf/)
  - **KML** (also supports vector objects, see https://www.ogc.org/standards/kml/)
  - **GeoPackage** (also supports vector objects, see https://www.ogc.org/standards/geopackage)
  
--

- &lt;svg viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;"&gt;  [ comment ]  &lt;path d="M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 110c23.196 0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627 0 12 5.373 12 12v100h12c6.627 0 12 5.373 12 12v24z"&gt;&lt;/path&gt;&lt;/svg&gt; More details :

  - https://gisgeography.com/gis-formats/
  - https://gdal.org/drivers/raster/index.html


---
# About &lt;svg viewBox="0 0 581 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;"&gt;  [ comment ]  &lt;path d="M581 226.6C581 119.1 450.9 32 290.5 32S0 119.1 0 226.6C0 322.4 103.3 402 239.4 418.1V480h99.1v-61.5c24.3-2.7 47.6-7.4 69.4-13.9L448 480h112l-67.4-113.7c54.5-35.4 88.4-84.9 88.4-139.7zm-466.8 14.5c0-73.5 98.9-133 220.8-133s211.9 40.7 211.9 133c0 50.1-26.5 85-70.3 106.4-2.4-1.6-4.7-2.9-6.4-3.7-10.2-5.2-27.8-10.5-27.8-10.5s86.6-6.4 86.6-92.7-90.6-87.9-90.6-87.9h-199V361c-74.1-21.5-125.2-67.1-125.2-119.9zm225.1 38.3v-55.6c57.8 0 87.8-6.8 87.8 27.3 0 36.5-38.2 28.3-87.8 28.3zm-.9 72.5H365c10.8 0 18.9 11.7 24 19.2-16.1 1.9-33 2.8-50.6 2.9v-22.1z"&gt;&lt;/path&gt;&lt;/svg&gt;

&gt; R is a programming language and free software environment for statistical computing and graphics supported by the R Foundation for Statistical Computing. &amp;nbsp;&amp;nbsp; [Wikipedia](https://bit.ly/2WFv1Nu)

--

.center[![:scale 50%](https://roelverbelen.netlify.app/img/hex-stickers.png)]



---
# Coding vs clicking

### 1. Programming/coding allows to automate what is frequently done!

--

### 2. Allow to make an analysis/a report reproducible 

--

  - create data pipeline 
  - for colleagues and future you

--

### 3. Increase efficiency (spend more time thinking)


--

### 4. Feeling empowered



???

One is not better than the other
do more, oik but do it in a better way


---
# Why &lt;svg viewBox="0 0 581 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;"&gt;  [ comment ]  &lt;path d="M581 226.6C581 119.1 450.9 32 290.5 32S0 119.1 0 226.6C0 322.4 103.3 402 239.4 418.1V480h99.1v-61.5c24.3-2.7 47.6-7.4 69.4-13.9L448 480h112l-67.4-113.7c54.5-35.4 88.4-84.9 88.4-139.7zm-466.8 14.5c0-73.5 98.9-133 220.8-133s211.9 40.7 211.9 133c0 50.1-26.5 85-70.3 106.4-2.4-1.6-4.7-2.9-6.4-3.7-10.2-5.2-27.8-10.5-27.8-10.5s86.6-6.4 86.6-92.7-90.6-87.9-90.6-87.9h-199V361c-74.1-21.5-125.2-67.1-125.2-119.9zm225.1 38.3v-55.6c57.8 0 87.8-6.8 87.8 27.3 0 36.5-38.2 28.3-87.8 28.3zm-.9 72.5H365c10.8 0 18.9 11.7 24 19.2-16.1 1.9-33 2.8-50.6 2.9v-22.1z"&gt;&lt;/path&gt;&lt;/svg&gt;?

&lt;br&gt;

### 1. Freeware + Open source

--

### 2. **Package ecosystem** is rich and under active development  

--

### 3. Many packages connect &lt;svg viewBox="0 0 581 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;"&gt;  [ comment ]  &lt;path d="M581 226.6C581 119.1 450.9 32 290.5 32S0 119.1 0 226.6C0 322.4 103.3 402 239.4 418.1V480h99.1v-61.5c24.3-2.7 47.6-7.4 69.4-13.9L448 480h112l-67.4-113.7c54.5-35.4 88.4-84.9 88.4-139.7zm-466.8 14.5c0-73.5 98.9-133 220.8-133s211.9 40.7 211.9 133c0 50.1-26.5 85-70.3 106.4-2.4-1.6-4.7-2.9-6.4-3.7-10.2-5.2-27.8-10.5-27.8-10.5s86.6-6.4 86.6-92.7-90.6-87.9-90.6-87.9h-199V361c-74.1-21.5-125.2-67.1-125.2-119.9zm225.1 38.3v-55.6c57.8 0 87.8-6.8 87.8 27.3 0 36.5-38.2 28.3-87.8 28.3zm-.9 72.5H365c10.8 0 18.9 11.7 24 19.2-16.1 1.9-33 2.8-50.6 2.9v-22.1z"&gt;&lt;/path&gt;&lt;/svg&gt; to other software/language

--

### 4. Community is wide, quite involved, responsive

--

### 5. You are most likely already using it! You are not starting from scratch

--

### **&lt;svg viewBox="0 0 448 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;"&gt;  [ comment ]  &lt;path d="M190.5 66.9l22.2-22.2c9.4-9.4 24.6-9.4 33.9 0L441 239c9.4 9.4 9.4 24.6 0 33.9L246.6 467.3c-9.4 9.4-24.6 9.4-33.9 0l-22.2-22.2c-9.5-9.5-9.3-25 .4-34.3L311.4 296H24c-13.3 0-24-10.7-24-24v-32c0-13.3 10.7-24 24-24h287.4L190.9 101.2c-9.8-9.3-10-24.8-.4-34.3z"&gt;&lt;/path&gt;&lt;/svg&gt; Very little cannot be done with &lt;svg viewBox="0 0 581 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;"&gt;  [ comment ]  &lt;path d="M581 226.6C581 119.1 450.9 32 290.5 32S0 119.1 0 226.6C0 322.4 103.3 402 239.4 418.1V480h99.1v-61.5c24.3-2.7 47.6-7.4 69.4-13.9L448 480h112l-67.4-113.7c54.5-35.4 88.4-84.9 88.4-139.7zm-466.8 14.5c0-73.5 98.9-133 220.8-133s211.9 40.7 211.9 133c0 50.1-26.5 85-70.3 106.4-2.4-1.6-4.7-2.9-6.4-3.7-10.2-5.2-27.8-10.5-27.8-10.5s86.6-6.4 86.6-92.7-90.6-87.9-90.6-87.9h-199V361c-74.1-21.5-125.2-67.1-125.2-119.9zm225.1 38.3v-55.6c57.8 0 87.8-6.8 87.8 27.3 0 36.5-38.2 28.3-87.8 28.3zm-.9 72.5H365c10.8 0 18.9 11.7 24 19.2-16.1 1.9-33 2.8-50.6 2.9v-22.1z"&gt;&lt;/path&gt;&lt;/svg&gt;**


???

Very few people look at the R source code but many people are now involved in package dev via GH or GL.

R Python Julia, whatever, language itself matters less that these
If you have time to learn a bit it might sometime makes sense, notably to work with other colleagues.

You don't start from scratch
















---

class: inverse, center, middle

# &lt;svg viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;"&gt;  [ comment ]  &lt;path d="M290.74 93.24l128.02 128.02-277.99 277.99-114.14 12.6C11.35 513.54-1.56 500.62.14 485.34l12.7-114.22 277.9-277.88zm207.2-19.06l-60.11-60.11c-18.75-18.75-49.16-18.75-67.91 0l-56.55 56.55 128.02 128.02 56.55-56.55c18.75-18.76 18.75-49.16 0-67.91z"&gt;&lt;/path&gt;&lt;/svg&gt; Input/Ouput 

![:custom_hr]()

## Read and write raster files (30min)

???

Will introduce a bit more package to deal with raster in R


---
# &lt;svg viewBox="0 0 581 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;"&gt;  [ comment ]  &lt;path d="M581 226.6C581 119.1 450.9 32 290.5 32S0 119.1 0 226.6C0 322.4 103.3 402 239.4 418.1V480h99.1v-61.5c24.3-2.7 47.6-7.4 69.4-13.9L448 480h112l-67.4-113.7c54.5-35.4 88.4-84.9 88.4-139.7zm-466.8 14.5c0-73.5 98.9-133 220.8-133s211.9 40.7 211.9 133c0 50.1-26.5 85-70.3 106.4-2.4-1.6-4.7-2.9-6.4-3.7-10.2-5.2-27.8-10.5-27.8-10.5s86.6-6.4 86.6-92.7-90.6-87.9-90.6-87.9h-199V361c-74.1-21.5-125.2-67.1-125.2-119.9zm225.1 38.3v-55.6c57.8 0 87.8-6.8 87.8 27.3 0 36.5-38.2 28.3-87.8 28.3zm-.9 72.5H365c10.8 0 18.9 11.7 24 19.2-16.1 1.9-33 2.8-50.6 2.9v-22.1z"&gt;&lt;/path&gt;&lt;/svg&gt; packages ecosystem for spatial objects

--

## Classes and Methods 

--

## Statistical Analyses

--

## Visualisation

--

## Data Retrieval 

---
# &lt;svg viewBox="0 0 581 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;"&gt;  [ comment ]  &lt;path d="M581 226.6C581 119.1 450.9 32 290.5 32S0 119.1 0 226.6C0 322.4 103.3 402 239.4 418.1V480h99.1v-61.5c24.3-2.7 47.6-7.4 69.4-13.9L448 480h112l-67.4-113.7c54.5-35.4 88.4-84.9 88.4-139.7zm-466.8 14.5c0-73.5 98.9-133 220.8-133s211.9 40.7 211.9 133c0 50.1-26.5 85-70.3 106.4-2.4-1.6-4.7-2.9-6.4-3.7-10.2-5.2-27.8-10.5-27.8-10.5s86.6-6.4 86.6-92.7-90.6-87.9-90.6-87.9h-199V361c-74.1-21.5-125.2-67.1-125.2-119.9zm225.1 38.3v-55.6c57.8 0 87.8-6.8 87.8 27.3 0 36.5-38.2 28.3-87.8 28.3zm-.9 72.5H365c10.8 0 18.9 11.7 24 19.2-16.1 1.9-33 2.8-50.6 2.9v-22.1z"&gt;&lt;/path&gt;&lt;/svg&gt; packages ecosystem for spatial objects

## Classes and Methods 

--

### Vectors 

- [`sp`](https://CRAN.R-project.org/package=sp)
- [`sf`](https://CRAN.R-project.org/package=sf) &lt;svg viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;"&gt;  [ comment ]  &lt;path d="M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z"&gt;&lt;/path&gt;&lt;/svg&gt;

--

### **Rasters** (our main focus)

- [`raster`](https://CRAN.R-project.org/package=raster) &lt;svg viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;"&gt;  [ comment ]  &lt;path d="M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z"&gt;&lt;/path&gt;&lt;/svg&gt;
- [`stars`](https://CRAN.R-project.org/package=stars) &lt;svg viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;"&gt;  [ comment ]  &lt;path d="M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z"&gt;&lt;/path&gt;&lt;/svg&gt;
- [`terra`](https://CRAN.R-project.org/package=terra) 

&lt;svg viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;"&gt;  [ comment ]  &lt;path d="M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 110c23.196 0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627 0 12 5.373 12 12v100h12c6.627 0 12 5.373 12 12v24z"&gt;&lt;/path&gt;&lt;/svg&gt; https://keen-swartz-3146c4.netlify.app/raster.html#package-stars
&lt;svg viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;"&gt;  [ comment ]  &lt;path d="M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 110c23.196 0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627 0 12 5.373 12 12v100h12c6.627 0 12 5.373 12 12v24z"&gt;&lt;/path&gt;&lt;/svg&gt; https://github.com/rspatial (15 packages)

???

Not visualisation later 



---
# Raster packages

### [`raster`](https://CRAN.R-project.org/package=raster) .font90[03/2010 (1.0.0) &amp;nbsp; // &amp;nbsp; 11/2020 (3.3-7)]
  
&lt;br&gt;

--
  
### [`terra`](https://CRAN.R-project.org/package=terra) .font90[03/2019 (0.5-2) &amp;nbsp; // &amp;nbsp; 11/2020 (0.9-11)]
  
&gt; terra is an R package that replaces raster. It has a very similar interface, but it is simpler and much faster. 

&lt;br&gt;
--
  
### [`stars`](https://CRAN.R-project.org/package=stars) .font90[07/2018  (0.1-1) &amp;nbsp; // &amp;nbsp; 07/2020 (0.4-3)]
  
&gt; Reading, manipulating, writing and plotting spatiotemporal arrays (raster and vector data cubes) in 'R'. 

Depends on [`sf`](https://CRAN.R-project.org/package=sf).
Note that `stars` and `sf` are [Tidyverse](https://www.tidyverse.org/) friendly.



---
# Package [`raster`](https://CRAN.R-project.org/package=raster)


### - Well documented 
  
  - see https://rspatial.org/raster/
  - many blog posts and tutorials (e.g. https://datacarpentry.org/r-raster-vector-geospatial/01-raster-structure/)

&lt;!-- length(devtools::revdep("raster", dependencies = c("Depends", "
   Imports"))) --&gt;

--

### - 383 packages depend on or import `raster` 

--

### - Depends on `sp` but also works with `sf`.


---
# Package [`stars`](https://CRAN.R-project.org/package=stars): SpatioTemporal ARrayS

### Extent `sf` to Raster and Vector Datacubes

.center[[![:scale 62%](https://raw.githubusercontent.com/r-spatial/stars/master/images/cube3.png)](https://r-spatial.github.io/stars/index.html)] 
.right[.font80[see https://r-spatial.github.io/stars/index.html]]


---
# Package [`stars`](https://CRAN.R-project.org/package=stars): SpatioTemporal ARrayS

### - Well documented too

.center[![:scale 92%](img/pkgdown_stars.png)]
.right[.font80[see https://r-spatial.github.io/stars/index.html]]

--

### - 9 packages depend on [`stars`](https://CRAN.R-project.org/package=stars)

### - So far, less material available online.

-- 

### We'll talk about both

---
# Read a raster file 


## .center[.font200[ &lt;svg viewBox="0 0 384 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;"&gt;  [ comment ]  &lt;path d="M369.9 97.9L286 14C277 5 264.8-.1 252.1-.1H48C21.5 0 0 21.5 0 48v416c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V131.9c0-12.7-5.1-25-14.1-34zM332.1 128H256V51.9l76.1 76.1zM48 464V48h160v104c0 13.3 10.7 24 24 24h104v288H48z"&gt;&lt;/path&gt;&lt;/svg&gt; &lt;svg viewBox="0 0 448 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;"&gt;  [ comment ]  &lt;path d="M190.5 66.9l22.2-22.2c9.4-9.4 24.6-9.4 33.9 0L441 239c9.4 9.4 9.4 24.6 0 33.9L246.6 467.3c-9.4 9.4-24.6 9.4-33.9 0l-22.2-22.2c-9.5-9.5-9.3-25 .4-34.3L311.4 296H24c-13.3 0-24-10.7-24-24v-32c0-13.3 10.7-24 24-24h287.4L190.9 101.2c-9.8-9.3-10-24.8-.4-34.3z"&gt;&lt;/path&gt;&lt;/svg&gt; &lt;svg viewBox="0 0 581 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;"&gt;  [ comment ]  &lt;path d="M581 226.6C581 119.1 450.9 32 290.5 32S0 119.1 0 226.6C0 322.4 103.3 402 239.4 418.1V480h99.1v-61.5c24.3-2.7 47.6-7.4 69.4-13.9L448 480h112l-67.4-113.7c54.5-35.4 88.4-84.9 88.4-139.7zm-466.8 14.5c0-73.5 98.9-133 220.8-133s211.9 40.7 211.9 133c0 50.1-26.5 85-70.3 106.4-2.4-1.6-4.7-2.9-6.4-3.7-10.2-5.2-27.8-10.5-27.8-10.5s86.6-6.4 86.6-92.7-90.6-87.9-90.6-87.9h-199V361c-74.1-21.5-125.2-67.1-125.2-119.9zm225.1 38.3v-55.6c57.8 0 87.8-6.8 87.8 27.3 0 36.5-38.2 28.3-87.8 28.3zm-.9 72.5H365c10.8 0 18.9 11.7 24 19.2-16.1 1.9-33 2.8-50.6 2.9v-22.1z"&gt;&lt;/path&gt;&lt;/svg&gt;]]

&lt;br&gt;

--

### 1. Files you created 

--

### 2. Files you found on the Internet 

--

### 3. &lt;svg viewBox="0 0 581 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;"&gt;  [ comment ]  &lt;path d="M581 226.6C581 119.1 450.9 32 290.5 32S0 119.1 0 226.6C0 322.4 103.3 402 239.4 418.1V480h99.1v-61.5c24.3-2.7 47.6-7.4 69.4-13.9L448 480h112l-67.4-113.7c54.5-35.4 88.4-84.9 88.4-139.7zm-466.8 14.5c0-73.5 98.9-133 220.8-133s211.9 40.7 211.9 133c0 50.1-26.5 85-70.3 106.4-2.4-1.6-4.7-2.9-6.4-3.7-10.2-5.2-27.8-10.5-27.8-10.5s86.6-6.4 86.6-92.7-90.6-87.9-90.6-87.9h-199V361c-74.1-21.5-125.2-67.1-125.2-119.9zm225.1 38.3v-55.6c57.8 0 87.8-6.8 87.8 27.3 0 36.5-38.2 28.3-87.8 28.3zm-.9 72.5H365c10.8 0 18.9 11.7 24 19.2-16.1 1.9-33 2.8-50.6 2.9v-22.1z"&gt;&lt;/path&gt;&lt;/svg&gt; packages to download raster files



---
# Example file 

![Accessed 16/12/2020](img/gebco.png)

- https://download.gebco.net/ 
- &lt;svg viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;"&gt;  [ comment ]  &lt;path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"&gt;&lt;/path&gt;&lt;/svg&gt; [data_and_script.zip](https://github.com/inSilecoInc/workshop_raster/raw/main/data_and_script.zip)



---
# Read with [`raster`](https://CRAN.R-project.org/package=raster)



```r
library(raster)
rar &lt;- raster("data/bathy.tif")  
class(rar)
#&gt; [1] "RasterLayer"
#&gt; attr(,"package")
#&gt; [1] "raster"
```


---
# Read with [`raster`](https://CRAN.R-project.org/package=raster)


```r
plot(rar)
```

&lt;img src="index_files/figure-html/plot_raster-1.png" style="display: block; margin: auto;" /&gt;



---
# Read with [`stars`](https://CRAN.R-project.org/package=stars)


```r
library(stars)
ras &lt;- read_stars("data/bathy.tif")   # argument `driver` to specify the driver
class(ras)
#&gt; [1] "stars"
```

---
# Read with [`stars`](https://CRAN.R-project.org/package=stars)


```r
plot(ras)
```

&lt;img src="index_files/figure-html/plot_stars-1.png" style="display: block; margin: auto;" /&gt;

---

# So ...

&lt;br&gt;

## - GeoTIFF &lt;svg viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;"&gt;  [ comment ]  &lt;path d="M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z"&gt;&lt;/path&gt;&lt;/svg&gt;

--

## - Other formats, how do we know?



---
# Check read/write capabilities with [`raster`](https://CRAN.R-project.org/package=raster)


&lt;svg viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;"&gt;  [ comment ]  &lt;path d="M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zm-248 50c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"&gt;&lt;/path&gt;&lt;/svg&gt;  [`rgdal`](https://CRAN.R-project.org/package=rgdal) is required


```r
ra_dr &lt;- rgdal::gdalDrivers()
head(ra_dr)
#&gt;      name                     long_name create  copy isRaster
#&gt; 1 AAIGrid           Arc/Info ASCII Grid  FALSE  TRUE     TRUE
#&gt; 2    ACE2                          ACE2  FALSE FALSE     TRUE
#&gt; 3    ADRG ARC Digitized Raster Graphics   TRUE FALSE     TRUE
#&gt; 4     AIG          Arc/Info Binary Grid  FALSE FALSE     TRUE
#&gt; 5  AirSAR     AirSAR Polarimetric Image  FALSE FALSE     TRUE
#&gt; 6     ARG     Azavea Raster Grid format  FALSE  TRUE     TRUE
```

--


```r
ra_dr[which(ra_dr$name == "GTiff"), ]
#&gt;     name long_name create copy isRaster
#&gt; 57 GTiff   GeoTIFF   TRUE TRUE     TRUE
```

---
# Check read/write capabilities with [`stars`](https://CRAN.R-project.org/package=stars)

&lt;svg viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;"&gt;  [ comment ]  &lt;path d="M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zm-248 50c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"&gt;&lt;/path&gt;&lt;/svg&gt; [`sf`](https://CRAN.R-project.org/package=rgdal) is required




```r
st_dr &lt;- sf::st_drivers(what = "raster")
head(st_dr)
#&gt;            name                                  long_name write  copy is_raster is_vector   vsi
#&gt; VRT         VRT                             Virtual Raster  TRUE  TRUE      TRUE     FALSE  TRUE
#&gt; DERIVED DERIVED Derived datasets using VRT pixel functions FALSE FALSE      TRUE     FALSE FALSE
#&gt; GTiff     GTiff                                    GeoTIFF  TRUE  TRUE      TRUE     FALSE  TRUE
#&gt; COG         COG          Cloud optimized GeoTIFF generator FALSE  TRUE      TRUE     FALSE  TRUE
#&gt; NITF       NITF       National Imagery Transmission Format  TRUE  TRUE      TRUE     FALSE  TRUE
#&gt; RPFTOC   RPFTOC           Raster Product Format TOC format FALSE FALSE      TRUE     FALSE  TRUE
```

&lt;!-- (-73/-41 62/37) see `data` --&gt;

---
# Check read/write capabilities with [`stars`](https://CRAN.R-project.org/package=stars)



```r
st_dr[which(st_dr$name == "GTiff"), ]
#&gt;        name long_name write copy is_raster is_vector  vsi
#&gt; GTiff GTiff   GeoTIFF  TRUE TRUE      TRUE     FALSE TRUE
```

--
.right[

.font80[&lt;svg viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;"&gt;  [ comment ]  &lt;path d="M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 110c23.196 0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627 0 12 5.373 12 12v100h12c6.627 0 12 5.373 12 12v24z"&gt;&lt;/path&gt;&lt;/svg&gt; https://gdal.org/drivers/raster/index.html]

.font80[&lt;svg viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;"&gt;  [ comment ]  &lt;path d="M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 110c23.196 0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627 0 12 5.373 12 12v100h12c6.627 0 12 5.373 12 12v24z"&gt;&lt;/path&gt;&lt;/svg&gt; https://keen-swartz-3146c4.netlify.app/intro.html#reading]

]




---
# Write raster files

##  .center[.font200[&lt;svg viewBox="0 0 581 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;"&gt;  [ comment ]  &lt;path d="M581 226.6C581 119.1 450.9 32 290.5 32S0 119.1 0 226.6C0 322.4 103.3 402 239.4 418.1V480h99.1v-61.5c24.3-2.7 47.6-7.4 69.4-13.9L448 480h112l-67.4-113.7c54.5-35.4 88.4-84.9 88.4-139.7zm-466.8 14.5c0-73.5 98.9-133 220.8-133s211.9 40.7 211.9 133c0 50.1-26.5 85-70.3 106.4-2.4-1.6-4.7-2.9-6.4-3.7-10.2-5.2-27.8-10.5-27.8-10.5s86.6-6.4 86.6-92.7-90.6-87.9-90.6-87.9h-199V361c-74.1-21.5-125.2-67.1-125.2-119.9zm225.1 38.3v-55.6c57.8 0 87.8-6.8 87.8 27.3 0 36.5-38.2 28.3-87.8 28.3zm-.9 72.5H365c10.8 0 18.9 11.7 24 19.2-16.1 1.9-33 2.8-50.6 2.9v-22.1z"&gt;&lt;/path&gt;&lt;/svg&gt; &lt;svg viewBox="0 0 448 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;"&gt;  [ comment ]  &lt;path d="M190.5 66.9l22.2-22.2c9.4-9.4 24.6-9.4 33.9 0L441 239c9.4 9.4 9.4 24.6 0 33.9L246.6 467.3c-9.4 9.4-24.6 9.4-33.9 0l-22.2-22.2c-9.5-9.5-9.3-25 .4-34.3L311.4 296H24c-13.3 0-24-10.7-24-24v-32c0-13.3 10.7-24 24-24h287.4L190.9 101.2c-9.8-9.3-10-24.8-.4-34.3z"&gt;&lt;/path&gt;&lt;/svg&gt; &lt;svg viewBox="0 0 384 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;"&gt;  [ comment ]  &lt;path d="M369.9 97.9L286 14C277 5 264.8-.1 252.1-.1H48C21.5 0 0 21.5 0 48v416c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V131.9c0-12.7-5.1-25-14.1-34zM332.1 128H256V51.9l76.1 76.1zM48 464V48h160v104c0 13.3 10.7 24 24 24h104v288H48z"&gt;&lt;/path&gt;&lt;/svg&gt;]]

--

## - Share the output file

--

## - Use another software (e.g. QGIS)

--

&lt;br&gt;

### &lt;svg viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;"&gt;  [ comment ]  &lt;path d="M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zm-248 50c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"&gt;&lt;/path&gt;&lt;/svg&gt; Create an `output` directory


```r
dir.create("output", showWarnings = FALSE)
```


---
# Write with [`raster`](https://CRAN.R-project.org/package=raster)


```r
ra_dr$name[ra_dr$create]
#&gt;  [1] "ADRG"      "BAG"       "BMP"       "BT"        "BYN"       "CTable2"   "EHdr"      "ELAS"     
#&gt;  [9] "ENVI"      "ERS"       "FITS"      "GPKG"      "GS7BG"     "GSBG"      "GTiff"     "GTX"      
#&gt; [17] "HDF4Image" "HFA"       "IDA"       "ILWIS"     "INGR"      "ISCE"      "ISIS2"     "ISIS3"    
#&gt; [25] "KRO"       "LAN"       "Leveller"  "MBTiles"   "MEM"       "MFF"       "MFF2"      "MRF"      
#&gt; [33] "netCDF"    "NGW"       "NITF"      "NTv2"      "NWT_GRD"   "PAux"      "PCIDSK"    "PCRaster" 
#&gt; [41] "PDF"       "PDS4"      "PNM"       "RMF"       "ROI_PAC"   "RRASTER"   "RST"       "SAGA"     
#&gt; [49] "SGI"       "Terragen"  "VICAR"     "VRT"
```

---
# Write with [`raster`](https://CRAN.R-project.org/package=raster)


```r
writeRaster(rar, filename = "output/rar.gpkg", format = "GPKG", overwrite = TRUE)
```


---
# Write with [`stars`](https://CRAN.R-project.org/package=stars)


```r
sort(st_dr$name[st_dr$write])
#&gt;  [1] "ADRG"      "BAG"       "BMP"       "BT"        "BYN"       "CTable2"   "EHdr"      "ELAS"     
#&gt;  [9] "ENVI"      "ERS"       "FITS"      "GPKG"      "GS7BG"     "GSBG"      "GTiff"     "GTX"      
#&gt; [17] "HDF4Image" "HFA"       "IDA"       "ILWIS"     "INGR"      "ISCE"      "ISIS2"     "ISIS3"    
#&gt; [25] "KRO"       "LAN"       "Leveller"  "MBTiles"   "MEM"       "MFF"       "MFF2"      "MRF"      
#&gt; [33] "netCDF"    "NGW"       "NITF"      "NTv2"      "NWT_GRD"   "PAux"      "PCIDSK"    "PCRaster" 
#&gt; [41] "PDF"       "PDS4"      "PNM"       "RMF"       "ROI_PAC"   "RRASTER"   "RST"       "SAGA"     
#&gt; [49] "SGI"       "Terragen"  "VICAR"     "VRT"
```

---
# Write with [`stars`](https://CRAN.R-project.org/package=stars)


```r
write_stars(ras, dsn = "output/ras.gpkg", driver = "GPKG")
```

&lt;svg viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;"&gt;  [ comment ]  &lt;path d="M497.9 142.1l-46.1 46.1c-4.7 4.7-12.3 4.7-17 0l-111-111c-4.7-4.7-4.7-12.3 0-17l46.1-46.1c18.7-18.7 49.1-18.7 67.9 0l60.1 60.1c18.8 18.7 18.8 49.1 0 67.9zM284.2 99.8L21.6 362.4.4 483.9c-2.9 16.4 11.4 30.6 27.8 27.8l121.5-21.3 262.6-262.6c4.7-4.7 4.7-12.3 0-17l-111-111c-4.8-4.7-12.4-4.7-17.1 0zM124.1 339.9c-5.5-5.5-5.5-14.3 0-19.8l154-154c5.5-5.5 14.3-5.5 19.8 0s5.5 14.3 0 19.8l-154 154c-5.5 5.5-14.3 5.5-19.8 0zM88 424h48v36.3l-64.5 11.3-31.1-31.1L51.7 376H88v48z"&gt;&lt;/path&gt;&lt;/svg&gt; dsn stands for **data source name**.


---
# &lt;svg viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;"&gt;  [ comment ]  &lt;path d="M243.2 189.9V258c26.1 5.9 49.3 15.6 73.6 22.3v-68.2c-26-5.8-49.4-15.5-73.6-22.2zm223.3-123c-34.3 15.9-76.5 31.9-117 31.9C296 98.8 251.7 64 184.3 64c-25 0-47.3 4.4-68 12 2.8-7.3 4.1-15.2 3.6-23.6C118.1 24 94.8 1.2 66.3 0 34.3-1.3 8 24.3 8 56c0 19 9.5 35.8 24 45.9V488c0 13.3 10.7 24 24 24h16c13.3 0 24-10.7 24-24v-94.4c28.3-12.1 63.6-22.1 114.4-22.1 53.6 0 97.8 34.8 165.2 34.8 48.2 0 86.7-16.3 122.5-40.9 8.7-6 13.8-15.8 13.8-26.4V95.9c.1-23.3-24.2-38.8-45.4-29zM169.6 325.5c-25.8 2.7-50 8.2-73.6 16.6v-70.5c26.2-9.3 47.5-15 73.6-17.4zM464 191c-23.6 9.8-46.3 19.5-73.6 23.9V286c24.8-3.4 51.4-11.8 73.6-26v70.5c-25.1 16.1-48.5 24.7-73.6 27.1V286c-27 3.7-47.9 1.5-73.6-5.6v67.4c-23.9-7.4-47.3-16.7-73.6-21.3V258c-19.7-4.4-40.8-6.8-73.6-3.8v-70c-22.4 3.1-44.6 10.2-73.6 20.9v-70.5c33.2-12.2 50.1-19.8 73.6-22v71.6c27-3.7 48.4-1.3 73.6 5.7v-67.4c23.7 7.4 47.2 16.7 73.6 21.3v68.4c23.7 5.3 47.6 6.9 73.6 2.7V143c27-4.8 52.3-13.6 73.6-22.5z"&gt;&lt;/path&gt;&lt;/svg&gt; Recap 

&lt;br&gt;&lt;br&gt;

| Action            | *raster*                 | *stars*               |
|:------------------|:-------------------------|:----------------------|
| list drivers      | `rgdal::gdalDrivers()`   | `sf::st_drivers()`    |
| read files        | `raster()`               | `read_stars()`        |
| write files       | `rasterWrite()`          | `read_stars()`        |



---
# &lt;svg viewBox="0 0 640 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;"&gt;  [ comment ]  &lt;path d="M257.981 272.971L63.638 467.314c-9.373 9.373-24.569 9.373-33.941 0L7.029 444.647c-9.357-9.357-9.375-24.522-.04-33.901L161.011 256 6.99 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L257.981 239.03c9.373 9.372 9.373 24.568 0 33.941zM640 456v-32c0-13.255-10.745-24-24-24H312c-13.255 0-24 10.745-24 24v32c0 13.255 10.745 24 24 24h304c13.255 0 24-10.745 24-24z"&gt;&lt;/path&gt;&lt;/svg&gt; R as a raster file converter 

<div class="countdown" id="timer_5ffdcae2" style="right:0;bottom:0;" data-warnwhen="0">
<code class="countdown-time"><span class="countdown-digits minutes">10</span><span class="countdown-digits colon">:</span><span class="countdown-digits seconds">00</span></code>
</div>
&lt;br&gt;

--

### &lt;svg viewBox="0 0 576 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;"&gt;  [ comment ]  &lt;path d="M528.1 171.5L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6zM388.6 312.3l23.7 138.4L288 385.4l-124.3 65.3 23.7-138.4-100.6-98 139-20.2 62.2-126 62.2 126 139 20.2-100.6 98z"&gt;&lt;/path&gt;&lt;/svg&gt; Convert `bathy.tif` into `bathy.grd` (https://gdal.org/drivers/raster/rraster.html#raster-rraster)

--

### &lt;svg viewBox="0 0 576 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;"&gt;  [ comment ]  &lt;path d="M528.1 171.5L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6zM388.6 312.3l23.7 138.4L288 385.4l-124.3 65.3 23.7-138.4-100.6-98 139-20.2 62.2-126 62.2 126 139 20.2-100.6 98z"&gt;&lt;/path&gt;&lt;/svg&gt; &lt;svg viewBox="0 0 576 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;"&gt;  [ comment ]  &lt;path d="M528.1 171.5L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6zM388.6 312.3l23.7 138.4L288 385.4l-124.3 65.3 23.7-138.4-100.6-98 139-20.2 62.2-126 62.2 126 139 20.2-100.6 98z"&gt;&lt;/path&gt;&lt;/svg&gt; Create a function `conv_raster()` that handles any conversion supported.

--

### &lt;svg viewBox="0 0 576 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;"&gt;  [ comment ]  &lt;path d="M528.1 171.5L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6zM388.6 312.3l23.7 138.4L288 385.4l-124.3 65.3 23.7-138.4-100.6-98 139-20.2 62.2-126 62.2 126 139 20.2-100.6 98z"&gt;&lt;/path&gt;&lt;/svg&gt; &lt;svg viewBox="0 0 576 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;"&gt;  [ comment ]  &lt;path d="M528.1 171.5L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6zM388.6 312.3l23.7 138.4L288 385.4l-124.3 65.3 23.7-138.4-100.6-98 139-20.2 62.2-126 62.2 126 139 20.2-100.6 98z"&gt;&lt;/path&gt;&lt;/svg&gt; &lt;svg viewBox="0 0 576 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;"&gt;  [ comment ]  &lt;path d="M528.1 171.5L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6zM388.6 312.3l23.7 138.4L288 385.4l-124.3 65.3 23.7-138.4-100.6-98 139-20.2 62.2-126 62.2 126 139 20.2-100.6 98z"&gt;&lt;/path&gt;&lt;/svg&gt; Create a function that converts a object of class `RasterLayer` object to a `stars` one (and conversely)


&lt;br&gt;



---
# Solution &lt;svg viewBox="0 0 576 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;"&gt;  [ comment ]  &lt;path d="M528.1 171.5L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6zM388.6 312.3l23.7 138.4L288 385.4l-124.3 65.3 23.7-138.4-100.6-98 139-20.2 62.2-126 62.2 126 139 20.2-100.6 98z"&gt;&lt;/path&gt;&lt;/svg&gt;

### Convert `bathy.tif` into `bathy.grd` 



--



---
# Solution &lt;svg viewBox="0 0 576 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;"&gt;  [ comment ]  &lt;path d="M528.1 171.5L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6zM388.6 312.3l23.7 138.4L288 385.4l-124.3 65.3 23.7-138.4-100.6-98 139-20.2 62.2-126 62.2 126 139 20.2-100.6 98z"&gt;&lt;/path&gt;&lt;/svg&gt; &lt;svg viewBox="0 0 576 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;"&gt;  [ comment ]  &lt;path d="M528.1 171.5L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6zM388.6 312.3l23.7 138.4L288 385.4l-124.3 65.3 23.7-138.4-100.6-98 139-20.2 62.2-126 62.2 126 139 20.2-100.6 98z"&gt;&lt;/path&gt;&lt;/svg&gt;

### Create a function `conv_raster()` that handles any conversion supported.



--



---
# Solution &lt;svg viewBox="0 0 576 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;"&gt;  [ comment ]  &lt;path d="M528.1 171.5L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6zM388.6 312.3l23.7 138.4L288 385.4l-124.3 65.3 23.7-138.4-100.6-98 139-20.2 62.2-126 62.2 126 139 20.2-100.6 98z"&gt;&lt;/path&gt;&lt;/svg&gt; &lt;svg viewBox="0 0 576 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;"&gt;  [ comment ]  &lt;path d="M528.1 171.5L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6zM388.6 312.3l23.7 138.4L288 385.4l-124.3 65.3 23.7-138.4-100.6-98 139-20.2 62.2-126 62.2 126 139 20.2-100.6 98z"&gt;&lt;/path&gt;&lt;/svg&gt; &lt;svg viewBox="0 0 576 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;"&gt;  [ comment ]  &lt;path d="M528.1 171.5L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6zM388.6 312.3l23.7 138.4L288 385.4l-124.3 65.3 23.7-138.4-100.6-98 139-20.2 62.2-126 62.2 126 139 20.2-100.6 98z"&gt;&lt;/path&gt;&lt;/svg&gt;

### Create a function that converts a object of class `RasterLayer` object to a `stars` one (and conversely)






---

class: inverse, center, middle

# &lt;svg viewBox="0 0 640 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;"&gt;  [ comment ]  &lt;path d="M512.1 191l-8.2 14.3c-3 5.3-9.4 7.5-15.1 5.4-11.8-4.4-22.6-10.7-32.1-18.6-4.6-3.8-5.8-10.5-2.8-15.7l8.2-14.3c-6.9-8-12.3-17.3-15.9-27.4h-16.5c-6 0-11.2-4.3-12.2-10.3-2-12-2.1-24.6 0-37.1 1-6 6.2-10.4 12.2-10.4h16.5c3.6-10.1 9-19.4 15.9-27.4l-8.2-14.3c-3-5.2-1.9-11.9 2.8-15.7 9.5-7.9 20.4-14.2 32.1-18.6 5.7-2.1 12.1.1 15.1 5.4l8.2 14.3c10.5-1.9 21.2-1.9 31.7 0L552 6.3c3-5.3 9.4-7.5 15.1-5.4 11.8 4.4 22.6 10.7 32.1 18.6 4.6 3.8 5.8 10.5 2.8 15.7l-8.2 14.3c6.9 8 12.3 17.3 15.9 27.4h16.5c6 0 11.2 4.3 12.2 10.3 2 12 2.1 24.6 0 37.1-1 6-6.2 10.4-12.2 10.4h-16.5c-3.6 10.1-9 19.4-15.9 27.4l8.2 14.3c3 5.2 1.9 11.9-2.8 15.7-9.5 7.9-20.4 14.2-32.1 18.6-5.7 2.1-12.1-.1-15.1-5.4l-8.2-14.3c-10.4 1.9-21.2 1.9-31.7 0zm-10.5-58.8c38.5 29.6 82.4-14.3 52.8-52.8-38.5-29.7-82.4 14.3-52.8 52.8zM386.3 286.1l33.7 16.8c10.1 5.8 14.5 18.1 10.5 29.1-8.9 24.2-26.4 46.4-42.6 65.8-7.4 8.9-20.2 11.1-30.3 5.3l-29.1-16.8c-16 13.7-34.6 24.6-54.9 31.7v33.6c0 11.6-8.3 21.6-19.7 23.6-24.6 4.2-50.4 4.4-75.9 0-11.5-2-20-11.9-20-23.6V418c-20.3-7.2-38.9-18-54.9-31.7L74 403c-10 5.8-22.9 3.6-30.3-5.3-16.2-19.4-33.3-41.6-42.2-65.7-4-10.9.4-23.2 10.5-29.1l33.3-16.8c-3.9-20.9-3.9-42.4 0-63.4L12 205.8c-10.1-5.8-14.6-18.1-10.5-29 8.9-24.2 26-46.4 42.2-65.8 7.4-8.9 20.2-11.1 30.3-5.3l29.1 16.8c16-13.7 34.6-24.6 54.9-31.7V57.1c0-11.5 8.2-21.5 19.6-23.5 24.6-4.2 50.5-4.4 76-.1 11.5 2 20 11.9 20 23.6v33.6c20.3 7.2 38.9 18 54.9 31.7l29.1-16.8c10-5.8 22.9-3.6 30.3 5.3 16.2 19.4 33.2 41.6 42.1 65.8 4 10.9.1 23.2-10 29.1l-33.7 16.8c3.9 21 3.9 42.5 0 63.5zm-117.6 21.1c59.2-77-28.7-164.9-105.7-105.7-59.2 77 28.7 164.9 105.7 105.7zm243.4 182.7l-8.2 14.3c-3 5.3-9.4 7.5-15.1 5.4-11.8-4.4-22.6-10.7-32.1-18.6-4.6-3.8-5.8-10.5-2.8-15.7l8.2-14.3c-6.9-8-12.3-17.3-15.9-27.4h-16.5c-6 0-11.2-4.3-12.2-10.3-2-12-2.1-24.6 0-37.1 1-6 6.2-10.4 12.2-10.4h16.5c3.6-10.1 9-19.4 15.9-27.4l-8.2-14.3c-3-5.2-1.9-11.9 2.8-15.7 9.5-7.9 20.4-14.2 32.1-18.6 5.7-2.1 12.1.1 15.1 5.4l8.2 14.3c10.5-1.9 21.2-1.9 31.7 0l8.2-14.3c3-5.3 9.4-7.5 15.1-5.4 11.8 4.4 22.6 10.7 32.1 18.6 4.6 3.8 5.8 10.5 2.8 15.7l-8.2 14.3c6.9 8 12.3 17.3 15.9 27.4h16.5c6 0 11.2 4.3 12.2 10.3 2 12 2.1 24.6 0 37.1-1 6-6.2 10.4-12.2 10.4h-16.5c-3.6 10.1-9 19.4-15.9 27.4l8.2 14.3c3 5.2 1.9 11.9-2.8 15.7-9.5 7.9-20.4 14.2-32.1 18.6-5.7 2.1-12.1-.1-15.1-5.4l-8.2-14.3c-10.4 1.9-21.2 1.9-31.7 0zM501.6 431c38.5 29.6 82.4-14.3 52.8-52.8-38.5-29.6-82.4 14.3-52.8 52.8z"&gt;&lt;/path&gt;&lt;/svg&gt; Manipulate 

![:custom_hr]()

## Do whatever you need with raster files (~1h15)


---
# Common operations

##  .center[.font200[&lt;svg viewBox="0 0 384 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;"&gt;  [ comment ]  &lt;path d="M369.9 97.9L286 14C277 5 264.8-.1 252.1-.1H48C21.5 0 0 21.5 0 48v416c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V131.9c0-12.7-5.1-25-14.1-34zM332.1 128H256V51.9l76.1 76.1zM48 464V48h160v104c0 13.3 10.7 24 24 24h104v288H48z"&gt;&lt;/path&gt;&lt;/svg&gt; &lt;svg viewBox="0 0 448 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;"&gt;  [ comment ]  &lt;path d="M190.5 66.9l22.2-22.2c9.4-9.4 24.6-9.4 33.9 0L441 239c9.4 9.4 9.4 24.6 0 33.9L246.6 467.3c-9.4 9.4-24.6 9.4-33.9 0l-22.2-22.2c-9.5-9.5-9.3-25 .4-34.3L311.4 296H24c-13.3 0-24-10.7-24-24v-32c0-13.3 10.7-24 24-24h287.4L190.9 101.2c-9.8-9.3-10-24.8-.4-34.3z"&gt;&lt;/path&gt;&lt;/svg&gt; &lt;svg viewBox="0 0 581 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;"&gt;  [ comment ]  &lt;path d="M581 226.6C581 119.1 450.9 32 290.5 32S0 119.1 0 226.6C0 322.4 103.3 402 239.4 418.1V480h99.1v-61.5c24.3-2.7 47.6-7.4 69.4-13.9L448 480h112l-67.4-113.7c54.5-35.4 88.4-84.9 88.4-139.7zm-466.8 14.5c0-73.5 98.9-133 220.8-133s211.9 40.7 211.9 133c0 50.1-26.5 85-70.3 106.4-2.4-1.6-4.7-2.9-6.4-3.7-10.2-5.2-27.8-10.5-27.8-10.5s86.6-6.4 86.6-92.7-90.6-87.9-90.6-87.9h-199V361c-74.1-21.5-125.2-67.1-125.2-119.9zm225.1 38.3v-55.6c57.8 0 87.8-6.8 87.8 27.3 0 36.5-38.2 28.3-87.8 28.3zm-.9 72.5H365c10.8 0 18.9 11.7 24 19.2-16.1 1.9-33 2.8-50.6 2.9v-22.1z"&gt;&lt;/path&gt;&lt;/svg&gt; &lt;svg viewBox="0 0 448 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;"&gt;  [ comment ]  &lt;path d="M190.5 66.9l22.2-22.2c9.4-9.4 24.6-9.4 33.9 0L441 239c9.4 9.4 9.4 24.6 0 33.9L246.6 467.3c-9.4 9.4-24.6 9.4-33.9 0l-22.2-22.2c-9.5-9.5-9.3-25 .4-34.3L311.4 296H24c-13.3 0-24-10.7-24-24v-32c0-13.3 10.7-24 24-24h287.4L190.9 101.2c-9.8-9.3-10-24.8-.4-34.3z"&gt;&lt;/path&gt;&lt;/svg&gt; &lt;svg viewBox="0 0 384 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;"&gt;  [ comment ]  &lt;path d="M369.9 97.9L286 14C277 5 264.8-.1 252.1-.1H48C21.5 0 0 21.5 0 48v416c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V131.9c0-12.7-5.1-25-14.1-34zM332.1 128H256V51.9l76.1 76.1zM48 464V48h160v104c0 13.3 10.7 24 24 24h104v288H48z"&gt;&lt;/path&gt;&lt;/svg&gt;]]


---
# Common operations

##  .center[.font200[&lt;svg viewBox="0 0 384 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;"&gt;  [ comment ]  &lt;path d="M369.9 97.9L286 14C277 5 264.8-.1 252.1-.1H48C21.5 0 0 21.5 0 48v416c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V131.9c0-12.7-5.1-25-14.1-34zM332.1 128H256V51.9l76.1 76.1zM48 464V48h160v104c0 13.3 10.7 24 24 24h104v288H48z"&gt;&lt;/path&gt;&lt;/svg&gt; &lt;svg viewBox="0 0 448 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;"&gt;  [ comment ]  &lt;path d="M190.5 66.9l22.2-22.2c9.4-9.4 24.6-9.4 33.9 0L441 239c9.4 9.4 9.4 24.6 0 33.9L246.6 467.3c-9.4 9.4-24.6 9.4-33.9 0l-22.2-22.2c-9.5-9.5-9.3-25 .4-34.3L311.4 296H24c-13.3 0-24-10.7-24-24v-32c0-13.3 10.7-24 24-24h287.4L190.9 101.2c-9.8-9.3-10-24.8-.4-34.3z"&gt;&lt;/path&gt;&lt;/svg&gt; &lt;svg viewBox="0 0 581 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;"&gt;  [ comment ]  &lt;path d="M581 226.6C581 119.1 450.9 32 290.5 32S0 119.1 0 226.6C0 322.4 103.3 402 239.4 418.1V480h99.1v-61.5c24.3-2.7 47.6-7.4 69.4-13.9L448 480h112l-67.4-113.7c54.5-35.4 88.4-84.9 88.4-139.7zm-466.8 14.5c0-73.5 98.9-133 220.8-133s211.9 40.7 211.9 133c0 50.1-26.5 85-70.3 106.4-2.4-1.6-4.7-2.9-6.4-3.7-10.2-5.2-27.8-10.5-27.8-10.5s86.6-6.4 86.6-92.7-90.6-87.9-90.6-87.9h-199V361c-74.1-21.5-125.2-67.1-125.2-119.9zm225.1 38.3v-55.6c57.8 0 87.8-6.8 87.8 27.3 0 36.5-38.2 28.3-87.8 28.3zm-.9 72.5H365c10.8 0 18.9 11.7 24 19.2-16.1 1.9-33 2.8-50.6 2.9v-22.1z"&gt;&lt;/path&gt;&lt;/svg&gt; &lt;svg viewBox="0 0 448 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;"&gt;  [ comment ]  &lt;path d="M190.5 66.9l22.2-22.2c9.4-9.4 24.6-9.4 33.9 0L441 239c9.4 9.4 9.4 24.6 0 33.9L246.6 467.3c-9.4 9.4-24.6 9.4-33.9 0l-22.2-22.2c-9.5-9.5-9.3-25 .4-34.3L311.4 296H24c-13.3 0-24-10.7-24-24v-32c0-13.3 10.7-24 24-24h287.4L190.9 101.2c-9.8-9.3-10-24.8-.4-34.3z"&gt;&lt;/path&gt;&lt;/svg&gt; &lt;svg viewBox="0 0 640 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;"&gt;  [ comment ]  &lt;path d="M512.1 191l-8.2 14.3c-3 5.3-9.4 7.5-15.1 5.4-11.8-4.4-22.6-10.7-32.1-18.6-4.6-3.8-5.8-10.5-2.8-15.7l8.2-14.3c-6.9-8-12.3-17.3-15.9-27.4h-16.5c-6 0-11.2-4.3-12.2-10.3-2-12-2.1-24.6 0-37.1 1-6 6.2-10.4 12.2-10.4h16.5c3.6-10.1 9-19.4 15.9-27.4l-8.2-14.3c-3-5.2-1.9-11.9 2.8-15.7 9.5-7.9 20.4-14.2 32.1-18.6 5.7-2.1 12.1.1 15.1 5.4l8.2 14.3c10.5-1.9 21.2-1.9 31.7 0L552 6.3c3-5.3 9.4-7.5 15.1-5.4 11.8 4.4 22.6 10.7 32.1 18.6 4.6 3.8 5.8 10.5 2.8 15.7l-8.2 14.3c6.9 8 12.3 17.3 15.9 27.4h16.5c6 0 11.2 4.3 12.2 10.3 2 12 2.1 24.6 0 37.1-1 6-6.2 10.4-12.2 10.4h-16.5c-3.6 10.1-9 19.4-15.9 27.4l8.2 14.3c3 5.2 1.9 11.9-2.8 15.7-9.5 7.9-20.4 14.2-32.1 18.6-5.7 2.1-12.1-.1-15.1-5.4l-8.2-14.3c-10.4 1.9-21.2 1.9-31.7 0zm-10.5-58.8c38.5 29.6 82.4-14.3 52.8-52.8-38.5-29.7-82.4 14.3-52.8 52.8zM386.3 286.1l33.7 16.8c10.1 5.8 14.5 18.1 10.5 29.1-8.9 24.2-26.4 46.4-42.6 65.8-7.4 8.9-20.2 11.1-30.3 5.3l-29.1-16.8c-16 13.7-34.6 24.6-54.9 31.7v33.6c0 11.6-8.3 21.6-19.7 23.6-24.6 4.2-50.4 4.4-75.9 0-11.5-2-20-11.9-20-23.6V418c-20.3-7.2-38.9-18-54.9-31.7L74 403c-10 5.8-22.9 3.6-30.3-5.3-16.2-19.4-33.3-41.6-42.2-65.7-4-10.9.4-23.2 10.5-29.1l33.3-16.8c-3.9-20.9-3.9-42.4 0-63.4L12 205.8c-10.1-5.8-14.6-18.1-10.5-29 8.9-24.2 26-46.4 42.2-65.8 7.4-8.9 20.2-11.1 30.3-5.3l29.1 16.8c16-13.7 34.6-24.6 54.9-31.7V57.1c0-11.5 8.2-21.5 19.6-23.5 24.6-4.2 50.5-4.4 76-.1 11.5 2 20 11.9 20 23.6v33.6c20.3 7.2 38.9 18 54.9 31.7l29.1-16.8c10-5.8 22.9-3.6 30.3 5.3 16.2 19.4 33.2 41.6 42.1 65.8 4 10.9.1 23.2-10 29.1l-33.7 16.8c3.9 21 3.9 42.5 0 63.5zm-117.6 21.1c59.2-77-28.7-164.9-105.7-105.7-59.2 77 28.7 164.9 105.7 105.7zm243.4 182.7l-8.2 14.3c-3 5.3-9.4 7.5-15.1 5.4-11.8-4.4-22.6-10.7-32.1-18.6-4.6-3.8-5.8-10.5-2.8-15.7l8.2-14.3c-6.9-8-12.3-17.3-15.9-27.4h-16.5c-6 0-11.2-4.3-12.2-10.3-2-12-2.1-24.6 0-37.1 1-6 6.2-10.4 12.2-10.4h16.5c3.6-10.1 9-19.4 15.9-27.4l-8.2-14.3c-3-5.2-1.9-11.9 2.8-15.7 9.5-7.9 20.4-14.2 32.1-18.6 5.7-2.1 12.1.1 15.1 5.4l8.2 14.3c10.5-1.9 21.2-1.9 31.7 0l8.2-14.3c3-5.3 9.4-7.5 15.1-5.4 11.8 4.4 22.6 10.7 32.1 18.6 4.6 3.8 5.8 10.5 2.8 15.7l-8.2 14.3c6.9 8 12.3 17.3 15.9 27.4h16.5c6 0 11.2 4.3 12.2 10.3 2 12 2.1 24.6 0 37.1-1 6-6.2 10.4-12.2 10.4h-16.5c-3.6 10.1-9 19.4-15.9 27.4l8.2 14.3c3 5.2 1.9 11.9-2.8 15.7-9.5 7.9-20.4 14.2-32.1 18.6-5.7 2.1-12.1-.1-15.1-5.4l-8.2-14.3c-10.4 1.9-21.2 1.9-31.7 0zM501.6 431c38.5 29.6 82.4-14.3 52.8-52.8-38.5-29.6-82.4 14.3-52.8 52.8z"&gt;&lt;/path&gt;&lt;/svg&gt; &lt;svg viewBox="0 0 448 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;"&gt;  [ comment ]  &lt;path d="M190.5 66.9l22.2-22.2c9.4-9.4 24.6-9.4 33.9 0L441 239c9.4 9.4 9.4 24.6 0 33.9L246.6 467.3c-9.4 9.4-24.6 9.4-33.9 0l-22.2-22.2c-9.5-9.5-9.3-25 .4-34.3L311.4 296H24c-13.3 0-24-10.7-24-24v-32c0-13.3 10.7-24 24-24h287.4L190.9 101.2c-9.8-9.3-10-24.8-.4-34.3z"&gt;&lt;/path&gt;&lt;/svg&gt; &lt;svg viewBox="0 0 384 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;"&gt;  [ comment ]  &lt;path d="M369.9 97.9L286 14C277 5 264.8-.1 252.1-.1H48C21.5 0 0 21.5 0 48v416c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V131.9c0-12.7-5.1-25-14.1-34zM332.1 128H256V51.9l76.1 76.1zM48 464V48h160v104c0 13.3 10.7 24 24 24h104v288H48z"&gt;&lt;/path&gt;&lt;/svg&gt;]]

--

- change projection 
- basic calculations (e.g. average per regions, min/max)
- crop/mask 
- extraction
- resample 
- etc.

---
# What do we have? [`raster`](https://CRAN.R-project.org/package=raster)


```r
class(rar)
#&gt; [1] "RasterLayer"
#&gt; attr(,"package")
#&gt; [1] "raster"
rar
#&gt; class      : RasterLayer 
#&gt; dimensions : 2880, 3840, 11059200  (nrow, ncol, ncell)
#&gt; resolution : 0.004166667, 0.004166667  (x, y)
#&gt; extent     : -71, -55, 43, 55  (xmin, xmax, ymin, ymax)
#&gt; crs        : +proj=longlat +datum=WGS84 +no_defs 
#&gt; source     : /home/kevcaz/Projects/inSilecoInc/workshop_raster/data/bathy.tif 
#&gt; names      : bathy 
#&gt; values     : -32768, 32767  (min, max)
```

---
# What do we have? [`raster`](https://CRAN.R-project.org/package=raster)


```r
values(rar)
#&gt;    [1] 457 461 463 463 467 474 484 490 478 460 452 455 456 454 451 450 449 447 446 442 443 453 459 452
#&gt;   [25] 437 429 432 440 446 451 460 465 466 472 485 498 506 502 493 493 498 502 507 506 479 457 453 453
#&gt;   [49] 453 455 458 460 460 457 455 453 454 456 457 464 472 484 508 537 555 557 560 567 565 564 563 558
#&gt;   [73] 558 566 565 559 555 547 541 549 557 560 556 557 568 575 573 567 564 565 568 569 570 570 569 561
#&gt;   [97] 549 547 564 582 583 582 586 588 583 572 562 554 547 543 540 540 551 560 560 555 562 576 573 561
#&gt;  [121] 553 554 556 554 553 556 556 550 536 522 515 512 510 510 509 507 506 505 505 507 510 514 519 524
#&gt;  [145] 529 536 539 531 522 520 521 522 527 538 550 559 560 552 542 534 532 537 543 544 545 545 542 535
#&gt;  [169] 533 533 535 544 556 568 580 590 596 603 604 604 610 609 600 591 585 570 558 554 543 538 546 558
#&gt;  [193] 566 563 547 537 538 541 536 524 518 518 514 506 504 505 506 507 512 522 529 521 505 499 502 505
#&gt;  [217] 505 502 498 499 496 500 518 532 523 503 496 492 489 492 505 522 531 515 498 502 511 520 519 511
#&gt;  [241] 494 488 481 477 476 476 477 476 475 475 475 475 475 475 477 482 489 492 495 499 504 506 505 507
#&gt;  [265] 512 513 504 492 488 495 511 517 505 491 491 504 530 552 560 571 576 556 526 504 495 490 483 476
#&gt;  [289] 471 469 473 480 482 483 483 483 482 480 481 483 484 484 485 487 485 482 488 501 500 488 486 493
#&gt;  [313] 507 526 541 550 563 566 557 550 549 553 561 558 546 532 511 489 484 497 504 499 492 486 477 467
#&gt;  [337] 458 452 445 440 443 448 455 462 468 465 454 443 440 447 454 457 461 464 465 486 524 528 502 477
#&gt;  [361] 467 473 484 485 492 508 527 539 533 510 492 489 492 500 502 502 508 513 513 507 510 532 547 548
#&gt;  [385] 559 566 569 573 576 575 573 580 590 593 586 576 575 576 567 553 545 548 551 563 580 584 575 567
#&gt;  [409] 563 565 569 569 565 559 563 567 564 565 573 587 594 580 569 573 572 563 554 548 545 549 551 546
#&gt;  [433] 544 546 548 545 544 544 541 535 534 533 529 528 530 536 541 547 569 579 562 546 538 532 528 535
#&gt;  [457] 544 539 537 547 560 561 559 555 552 550 551 552 550 547 547 553 561 569 574 567 554 547 545 545
#&gt;  [481] 552 560 566 576 588 585 570 572 581 577 574 570 566 565 569 581 585 573 562 555 553 543 534 533
#&gt;  [505] 534 542 547 550 552 552 553 549 547 550 551 555 559 561 561 568 577 579 576 591 611 609 600 589
#&gt;  [529] 592 598 596 599 609 625 627 619 616 614 608 601 595 592 592 599 612 619 620 623 630 635 627 621
#&gt;  [553] 623 621 613 607 599 599 606 614 614 601 588 583 582 582 590 610 627 634 637 637 631 618 605 588
#&gt;  [577] 575 572 575 567 562 570 584 593 580 561 549 551 553 558 557 541 527 522 523 523 521 520 521 520
#&gt;  [601] 520 524 538 549 545 538 538 535 534 537 539 540 549 555 554 547 545 552 557 562 571 568 549 535
#&gt;  [625] 532 511 496 501 534 569 571 556 548 543 539 538 540 543 538 543 566 577 580 597 589 574 588 602
#&gt;  [649] 608 613 612 605 588 571 601 644 640 607 587 582 584 580 585 591 578 571 580 575 578 582 578 579
#&gt;  [673] 586 591 599 617 614 611 625 629 623 611 608 604 601 597 604 617 594 543 522 541 563 590 615 629
#&gt;  [697] 627 623 629 632 635 634 626 614 605 599 586 571 574 588 606 611 588 559 558 587 622 640 642 633
#&gt;  [721] 613 585 563 551 551 555 547 537 533 533 534 535 543 558 569 563 551 546 541 538 538 545 552 549
#&gt;  [745] 542 546 553 556 551 558 566 564 554 551 550 547 544 542 545 549 547 543 543 547 559 575 584 584
#&gt;  [769] 586 603 622 635 631 616 612 612 602 576 565 568 575 585 596 599 591 583 586 596 602 604 599 584
#&gt;  [793] 577 573 563 559 569 588 603 612 613 606 603 602 599 603 616 624 622 614 607 607 614 618 618 618
#&gt;  [817] 617 625 646 661 655 624 620 635 645 658 668 668 668 669 669 669 670 660 643 640 638 626 626 630
#&gt;  [841] 634 635 627 617 616 620 610 609 614 615 608 601 598 597 599 598 601 622 651 672 685 684 677 669
#&gt;  [865] 658 646 635 625 613 600 591 584 579 576 570 559 550 543 535 527 520 517 515 515 516 518 522 529
#&gt;  [889] 538 549 560 568 574 578 584 588 589 589 589 592 598 604 610 617 628 646 675 709 720 699 673 651
#&gt;  [913] 638 635 632 622 606 583 562 554 551 549 548 549 546 541 534 530 531 535 543 547 536 533 542 539
#&gt;  [937] 521 505 501 500 498 499 499 501 502 500 498 494 492 491 489 485 488 506 508 496 487 484 483 482
#&gt;  [961] 478 475 473 472 470 469 468 469 472 473 473 471 470 472 474 476 478 480 482 485 486 486 486 486
#&gt;  [985] 485 487 489 492 494 494 493 493 493 494 493 492 492 492 493 493 495 498 501 509 522 540 555 555
#&gt; [1009] 544 534 529 527 526 524 525 528 533 546 568 576 563 549 540 532 521 509 501 499 496 491 487 484
#&gt; [1033] 480 479 482 485 485 481 477 475 475 474 475 483 502 535 560 540 509 488 478 479 488 488 487 490
#&gt; [1057] 495 496 486 481 479 477 475 475 475 475 475 475 475 475 475 475 475 475 475 475 475 475 475 475
#&gt; [1081] 475 476 476 476 477 477 476 478 479 476 475 477 477 476 476 476 475 475 475 475 476 476 476 476
#&gt; [1105] 475 475 475 475 476 476 476 476 475 475 476 476 479 482 481 479 482 486 485 480 478 480 482 481
#&gt; [1129] 482 486 488 487 488 493 504 521 537 551 561 561 544 540 555 547 518 503 494 484 479 479 482 487
#&gt; [1153] 494 502 511 519 529 552 576 581 561 537 524 506 487 482 488 500 511 520 523 523 521 518 512 507
#&gt; [1177] 503 500 496 493 496 503 512 516 517 519 515 510 509 506 507 516 533 554 574 586 578 563 558 563
#&gt; [1201] 571 565 556 560 569 575 569 547 522 506 497 494 497 500 498 492 489 495 506 517 525 526 521 517
#&gt; [1225] 513 507 501 494 488 483 480 481 484 489 491 487 482 483 486 488 490 486 481 477 474 472 472 472
#&gt; [1249] 472 472 472 471 471 471 473 473 473 472 471 470 471 473 474 475 476 474 473 475 478 479 479 478
#&gt; [1273] 478 478 479 479 479 479 478 478 478 479 479 479 480 481 479 476 477 480 483 483 480 478 478 482
#&gt; [1297] 488 491 488 482 481 485 485 483 483 483 481 480 480 481 480 479 478 478 477 475 477 480 478 474
#&gt; [1321] 473 473 473 473 473 473 473 473 473 473 473 473 473 473 473 473 474 474 476 475 474 474 473 473
#&gt; [1345] 474 473 473 473 474 477 479 478 474 474 479 482 481 480 481 483 483 483 486 486 485 484 481 479
#&gt; [1369] 478 470 460 466 479 484 493 515 531 533 541 553 562 569 572 567 563 566 576 585 582 568 554 547
#&gt; [1393] 543 541 543 544 536 530 529 531 535 539 543 545 546 555 579 602 614 612 601 604 616 616 611 607
#&gt; [1417] 610 618 617 607 587 568 558 554 556 565 571 570 562 552 538 528 529 538 554 568 571 562 543 528
#&gt; [1441] 521 523 520 510 506 511 519 518 505 495 498 505 505 501 502 507 514 526 527 523 528 542 558 574
#&gt; [1465] 576 563 547 538 541 547 549 544 536 529 524 522 521 522 526 530 528 523 517 514 513 513 515 518
#&gt; [1489] 511 506 506 504 502 495 491 493 500 505 510 510 505 504 513 526 528 527 530 528 523 518 514 514
#&gt; [1513] 514 515 514 512 511 511 513 517 528 539 534 520 509 502 497 494 494 494 492 491 491 489 488 488
#&gt; [1537] 489 490 490 491 492 493 495 497 499 498 498 498 500 500 501 501 499 496 493 490 488 486 484 482
#&gt; [1561] 479 476 473 472 477 486 497 506 510 521 535 541 546 555 555 546 537 522 502 485 476 471 469 467
#&gt; [1585] 464 460 455 452 453 456 460 465 467 465 463 463 463 465 467 468 470 471 472 472 473 473 474 476
#&gt; [1609] 478 480 480 481 481 481 482 486 492 498 502 502 503 507 513 522 532 538 536 535 548 569 580 578
#&gt; [1633] 568 555 543 536 534 534 535 536 534 536 544 551 545 529 521 534 543 537 526 520 516 516 516 515
#&gt; [1657] 515 517 525 536 540 539 543 555 567 568 553 533 520 515 515 523 540 553 559 558 552 543 536 536
#&gt; [1681] 545 552 550 543 536 533 539 547 547 541 533 530 539 546 541 537 530 522 518 518 518 517 516 516
#&gt; [1705] 517 516 515 515 517 521 529 539 542 540 538 537 537 537 537 536 535 533 530 525 521 518 514 506
#&gt; [1729] 501 500 503 503 501 499 498 498 499 498 498 498 498 498 498 498 498 498 500 503 503 503 504 504
#&gt; [1753] 505 506 505 505 505 505 504 503 502 503 507 509 509 509 509 508 509 510 510 508 507 507 507 507
#&gt; [1777] 507 507 507 508 509 511 510 510 513 520 526 526 522 518 515 513 510 508 507 507 507 507 507 507
#&gt; [1801] 507 507 507 507 507 508 510 512 513 513 515 518 521 521 519 520 528 535 531 526 525 525 525 523
#&gt; [1825] 523 526 530 528 526 523 522 522 524 527 530 545 577 614 636 639 623 600 585 568 551 544 539 536
#&gt; [1849] 531 529 529 531 530 529 536 546 547 554 579 608 632 634 615 596 586 584 583 569 552 541 539 543
#&gt; [1873] 547 546 537 528 523 522 524 526 529 535 542 542 542 537 525 512 505 508 521 527 533 537 542 536
#&gt; [1897] 520 507 491 470 450 453 459 462 476 499 507 499 490 494 493 481 471 469 454 449 448 452 462 478
#&gt; [1921] 492 505 523 542 538 514 503 520 537 541 544 546 540 533 529 535 543 545 541 531 525 524 523 522
#&gt; [1945] 522 526 538 551 559 560 551 541 538 538 543 551 558 560 560 561 560 561 564 564 565 569 567 566
#&gt; [1969] 564 562 561 560 558 557 557 554 555 555 554 554 554 554 554 554 554 556 556 556 557 557 557 557
#&gt; [1993] 558 558 560 561 564 568 566 569 577 576 567 561 560 566 573 571 567 561 558 556 556 559 570 583
#&gt; [2017] 594 600 598 586 578 573 572 571 568 565 563 577 614 655 671 663 645 629 614 607 622 637 629 629
#&gt; [2041] 650 665 650 620 606 602 598 599 603 606 616 626 617 605 595 593 602 605 608 613 634 652 632 610
#&gt; [2065] 612 643 684 717 730 733 725 699 664 637 640 659 675 709 750 767 750 701 638 590 569 586 616 614
#&gt; [2089] 599 591 592 565 526 565 631 639 601 586 584 576 562 536 495 439 384 403 454 467 474 476 478 483
#&gt; [2113] 484 483 496 516 526 541 561 555 527 493 459 434 457 498 553 612 648 656 627 557 488 438 374 285
#&gt; [2137] 183 109  97  99 124 169 187 232 347 462 518 546 570 594 616 627 627 611 600 608 612 615 607 605
#&gt; [2161] 592 565 546 534 515 504 516 522 514 489 413 334 297 303 319 334 361 370 364 359 364 390 424 437
#&gt; [2185] 457 494 534 557 561 552 551 529 479 467 490 512 507 478 447 430 457 510 562 598 608 598 579 544
#&gt; [2209] 505 468 443 444 457 476 490 481 466 457 453 464 463 426 400 399 408 417 443 472 492 499 490 480
#&gt; [2233] 466 442 425 426 439 444 434 434 457 483 498 488 474 461 460 498 517 496 482 485 498 529 569 595
#&gt; [2257] 585 548 493 438 412 421 456 508 546 555 551 530 507 492 471 449 441 457 476 485 474 444 405 385
#&gt; [2281] 395 418 434 434 418 384 351 311 261 230 219 219 221 224 230 235 249 266 267 260 251 240 233 244
#&gt; [2305] 256 259 271 277 273 270 273 262 237 215 192 158 139 127 112 100  91  84  82  77  77  76  77  82
#&gt; [2329]  97 119 143 173 164 114 105  96  87  81  77  75  75  77  83  91  99 107 116 130 139 143 146 157
#&gt; [2353] 170 191 211 208 194 175 157 142 131 113 114 116  93  71  68  72  71  68  69  76  88 100 112 127
#&gt; [2377] 155 194 218 208 168 147 151 167 180 194 212 221 223 207 180 181 191 187 180 200 213 178 116  74
#&gt;  [ reached getOption("max.print") -- omitted 11056800 entries ]
```


---
# What do we have? [`raster`](https://CRAN.R-project.org/package=raster)


```r
dim(rar)
#&gt; [1] 2880 3840    1
ncell(rar)
#&gt; [1] 11059200
projection(rar)
#&gt; [1] "+proj=longlat +datum=WGS84 +no_defs"
bbox(rar)
#&gt;    min max
#&gt; s1 -71 -55
#&gt; s2  43  55
extent(rar)
#&gt; class      : Extent 
#&gt; xmin       : -71 
#&gt; xmax       : -55 
#&gt; ymin       : 43 
#&gt; ymax       : 55
```

---
# What do we have? [`stars`](https://CRAN.R-project.org/package=stars)


```r
class(ras)
#&gt; [1] "stars"
ras
#&gt; stars object with 2 dimensions and 1 attribute
#&gt; attribute(s), summary of first 1e+05 cells:
#&gt;  bathy.tif [m]   
#&gt;  Min.   :-435.0  
#&gt;  1st Qu.:  23.0  
#&gt;  Median : 479.0  
#&gt;  Mean   : 299.5  
#&gt;  3rd Qu.: 540.0  
#&gt;  Max.   : 812.0  
#&gt; dimension(s):
#&gt;   from   to offset       delta refsys point values    
#&gt; x    1 3840    -71  0.00416667 WGS 84 FALSE   NULL [x]
#&gt; y    1 2880     55 -0.00416667 WGS 84 FALSE   NULL [y]
```

---
# What do we have? [`stars`](https://CRAN.R-project.org/package=stars)


```r
class(ras[[1]])
#&gt; [1] "units"
ras[[1]]
#&gt; Units: [m]
#&gt;         [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10] [,11] [,12] [,13] [,14] [,15] [,16] [,17]
#&gt;         [,18] [,19] [,20] [,21] [,22] [,23] [,24] [,25] [,26] [,27] [,28] [,29] [,30] [,31] [,32] [,33]
#&gt;         [,34] [,35] [,36] [,37] [,38] [,39] [,40] [,41] [,42] [,43] [,44] [,45] [,46] [,47] [,48] [,49]
#&gt;         [,50] [,51] [,52] [,53] [,54] [,55] [,56] [,57] [,58] [,59] [,60] [,61] [,62] [,63] [,64] [,65]
#&gt;         [,66] [,67] [,68] [,69] [,70] [,71] [,72] [,73] [,74] [,75] [,76] [,77] [,78] [,79] [,80] [,81]
#&gt;         [,82] [,83] [,84] [,85] [,86] [,87] [,88] [,89] [,90] [,91] [,92] [,93] [,94] [,95] [,96] [,97]
#&gt;         [,98] [,99] [,100] [,101] [,102] [,103] [,104] [,105] [,106] [,107] [,108] [,109] [,110] [,111]
#&gt;         [,112] [,113] [,114] [,115] [,116] [,117] [,118] [,119] [,120] [,121] [,122] [,123] [,124]
#&gt;         [,125] [,126] [,127] [,128] [,129] [,130] [,131] [,132] [,133] [,134] [,135] [,136] [,137]
#&gt;         [,138] [,139] [,140] [,141] [,142] [,143] [,144] [,145] [,146] [,147] [,148] [,149] [,150]
#&gt;         [,151] [,152] [,153] [,154] [,155] [,156] [,157] [,158] [,159] [,160] [,161] [,162] [,163]
#&gt;         [,164] [,165] [,166] [,167] [,168] [,169] [,170] [,171] [,172] [,173] [,174] [,175] [,176]
#&gt;         [,177] [,178] [,179] [,180] [,181] [,182] [,183] [,184] [,185] [,186] [,187] [,188] [,189]
#&gt;         [,190] [,191] [,192] [,193] [,194] [,195] [,196] [,197] [,198] [,199] [,200] [,201] [,202]
#&gt;         [,203] [,204] [,205] [,206] [,207] [,208] [,209] [,210] [,211] [,212] [,213] [,214] [,215]
#&gt;         [,216] [,217] [,218] [,219] [,220] [,221] [,222] [,223] [,224] [,225] [,226] [,227] [,228]
#&gt;         [,229] [,230] [,231] [,232] [,233] [,234] [,235] [,236] [,237] [,238] [,239] [,240] [,241]
#&gt;         [,242] [,243] [,244] [,245] [,246] [,247] [,248] [,249] [,250] [,251] [,252] [,253] [,254]
#&gt;         [,255] [,256] [,257] [,258] [,259] [,260] [,261] [,262] [,263] [,264] [,265] [,266] [,267]
#&gt;         [,268] [,269] [,270] [,271] [,272] [,273] [,274] [,275] [,276] [,277] [,278] [,279] [,280]
#&gt;         [,281] [,282] [,283] [,284] [,285] [,286] [,287] [,288] [,289] [,290] [,291] [,292] [,293]
#&gt;         [,294] [,295] [,296] [,297] [,298] [,299] [,300] [,301] [,302] [,303] [,304] [,305] [,306]
#&gt;         [,307] [,308] [,309] [,310] [,311] [,312] [,313] [,314] [,315] [,316] [,317] [,318] [,319]
#&gt;         [,320] [,321] [,322] [,323] [,324] [,325] [,326] [,327] [,328] [,329] [,330] [,331] [,332]
#&gt;         [,333] [,334] [,335] [,336] [,337] [,338] [,339] [,340] [,341] [,342] [,343] [,344] [,345]
#&gt;         [,346] [,347] [,348] [,349] [,350] [,351] [,352] [,353] [,354] [,355] [,356] [,357] [,358]
#&gt;         [,359] [,360] [,361] [,362] [,363] [,364] [,365] [,366] [,367] [,368] [,369] [,370] [,371]
#&gt;         [,372] [,373] [,374] [,375] [,376] [,377] [,378] [,379] [,380] [,381] [,382] [,383] [,384]
#&gt;         [,385] [,386] [,387] [,388] [,389] [,390] [,391] [,392] [,393] [,394] [,395] [,396] [,397]
#&gt;         [,398] [,399] [,400] [,401] [,402] [,403] [,404] [,405] [,406] [,407] [,408] [,409] [,410]
#&gt;         [,411] [,412] [,413] [,414] [,415] [,416] [,417] [,418] [,419] [,420] [,421] [,422] [,423]
#&gt;         [,424] [,425] [,426] [,427] [,428] [,429] [,430] [,431] [,432] [,433] [,434] [,435] [,436]
#&gt;         [,437] [,438] [,439] [,440] [,441] [,442] [,443] [,444] [,445] [,446] [,447] [,448] [,449]
#&gt;         [,450] [,451] [,452] [,453] [,454] [,455] [,456] [,457] [,458] [,459] [,460] [,461] [,462]
#&gt;         [,463] [,464] [,465] [,466] [,467] [,468] [,469] [,470] [,471] [,472] [,473] [,474] [,475]
#&gt;         [,476] [,477] [,478] [,479] [,480] [,481] [,482] [,483] [,484] [,485] [,486] [,487] [,488]
#&gt;         [,489] [,490] [,491] [,492] [,493] [,494] [,495] [,496] [,497] [,498] [,499] [,500] [,501]
#&gt;         [,502] [,503] [,504] [,505] [,506] [,507] [,508] [,509] [,510] [,511] [,512] [,513] [,514]
#&gt;         [,515] [,516] [,517] [,518] [,519] [,520] [,521] [,522] [,523] [,524] [,525] [,526] [,527]
#&gt;         [,528] [,529] [,530] [,531] [,532] [,533] [,534] [,535] [,536] [,537] [,538] [,539] [,540]
#&gt;         [,541] [,542] [,543] [,544] [,545] [,546] [,547] [,548] [,549] [,550] [,551] [,552] [,553]
#&gt;         [,554] [,555] [,556] [,557] [,558] [,559] [,560] [,561] [,562] [,563] [,564] [,565] [,566]
#&gt;         [,567] [,568] [,569] [,570] [,571] [,572] [,573] [,574] [,575] [,576] [,577] [,578] [,579]
#&gt;         [,580] [,581] [,582] [,583] [,584] [,585] [,586] [,587] [,588] [,589] [,590] [,591] [,592]
#&gt;         [,593] [,594] [,595] [,596] [,597] [,598] [,599] [,600] [,601] [,602] [,603] [,604] [,605]
#&gt;         [,606] [,607] [,608] [,609] [,610] [,611] [,612] [,613] [,614] [,615] [,616] [,617] [,618]
#&gt;         [,619] [,620] [,621] [,622] [,623] [,624] [,625] [,626] [,627] [,628] [,629] [,630] [,631]
#&gt;         [,632] [,633] [,634] [,635] [,636] [,637] [,638] [,639] [,640] [,641] [,642] [,643] [,644]
#&gt;         [,645] [,646] [,647] [,648] [,649] [,650] [,651] [,652] [,653] [,654] [,655] [,656] [,657]
#&gt;         [,658] [,659] [,660] [,661] [,662] [,663] [,664] [,665] [,666] [,667] [,668] [,669] [,670]
#&gt;         [,671] [,672] [,673] [,674] [,675] [,676] [,677] [,678] [,679] [,680] [,681] [,682] [,683]
#&gt;         [,684] [,685] [,686] [,687] [,688] [,689] [,690] [,691] [,692] [,693] [,694] [,695] [,696]
#&gt;         [,697] [,698] [,699] [,700] [,701] [,702] [,703] [,704] [,705] [,706] [,707] [,708] [,709]
#&gt;         [,710] [,711] [,712] [,713] [,714] [,715] [,716] [,717] [,718] [,719] [,720] [,721] [,722]
#&gt;         [,723] [,724] [,725] [,726] [,727] [,728] [,729] [,730] [,731] [,732] [,733] [,734] [,735]
#&gt;         [,736] [,737] [,738] [,739] [,740] [,741] [,742] [,743] [,744] [,745] [,746] [,747] [,748]
#&gt;         [,749] [,750] [,751] [,752] [,753] [,754] [,755] [,756] [,757] [,758] [,759] [,760] [,761]
#&gt;         [,762] [,763] [,764] [,765] [,766] [,767] [,768] [,769] [,770] [,771] [,772] [,773] [,774]
#&gt;         [,775] [,776] [,777] [,778] [,779] [,780] [,781] [,782] [,783] [,784] [,785] [,786] [,787]
#&gt;         [,788] [,789] [,790] [,791] [,792] [,793] [,794] [,795] [,796] [,797] [,798] [,799] [,800]
#&gt;         [,801] [,802] [,803] [,804] [,805] [,806] [,807] [,808] [,809] [,810] [,811] [,812] [,813]
#&gt;         [,814] [,815] [,816] [,817] [,818] [,819] [,820] [,821] [,822] [,823] [,824] [,825] [,826]
#&gt;         [,827] [,828] [,829] [,830] [,831] [,832] [,833] [,834] [,835] [,836] [,837] [,838] [,839]
#&gt;         [,840] [,841] [,842] [,843] [,844] [,845] [,846] [,847] [,848] [,849] [,850] [,851] [,852]
#&gt;         [,853] [,854] [,855] [,856] [,857] [,858] [,859] [,860] [,861] [,862] [,863] [,864] [,865]
#&gt;         [,866] [,867] [,868] [,869] [,870] [,871] [,872] [,873] [,874] [,875] [,876] [,877] [,878]
#&gt;         [,879] [,880] [,881] [,882] [,883] [,884] [,885] [,886] [,887] [,888] [,889] [,890] [,891]
#&gt;         [,892] [,893] [,894] [,895] [,896] [,897] [,898] [,899] [,900] [,901] [,902] [,903] [,904]
#&gt;         [,905] [,906] [,907] [,908] [,909] [,910] [,911] [,912] [,913] [,914] [,915] [,916] [,917]
#&gt;         [,918] [,919] [,920] [,921] [,922] [,923] [,924] [,925] [,926] [,927] [,928] [,929] [,930]
#&gt;         [,931] [,932] [,933] [,934] [,935] [,936] [,937] [,938] [,939] [,940] [,941] [,942] [,943]
#&gt;         [,944] [,945] [,946] [,947] [,948] [,949] [,950] [,951] [,952] [,953] [,954] [,955] [,956]
#&gt;         [,957] [,958] [,959] [,960] [,961] [,962] [,963] [,964] [,965] [,966] [,967] [,968] [,969]
#&gt;         [,970] [,971] [,972] [,973] [,974] [,975] [,976] [,977] [,978] [,979] [,980] [,981] [,982]
#&gt;         [,983] [,984] [,985] [,986] [,987] [,988] [,989] [,990] [,991] [,992] [,993] [,994] [,995]
#&gt;         [,996] [,997] [,998] [,999] [,1000] [,1001] [,1002] [,1003] [,1004] [,1005] [,1006] [,1007]
#&gt;         [,1008] [,1009] [,1010] [,1011] [,1012] [,1013] [,1014] [,1015] [,1016] [,1017] [,1018] [,1019]
#&gt;         [,1020] [,1021] [,1022] [,1023] [,1024] [,1025] [,1026] [,1027] [,1028] [,1029] [,1030] [,1031]
#&gt;         [,1032] [,1033] [,1034] [,1035] [,1036] [,1037] [,1038] [,1039] [,1040] [,1041] [,1042] [,1043]
#&gt;         [,1044] [,1045] [,1046] [,1047] [,1048] [,1049] [,1050] [,1051] [,1052] [,1053] [,1054] [,1055]
#&gt;         [,1056] [,1057] [,1058] [,1059] [,1060] [,1061] [,1062] [,1063] [,1064] [,1065] [,1066] [,1067]
#&gt;         [,1068] [,1069] [,1070] [,1071] [,1072] [,1073] [,1074] [,1075] [,1076] [,1077] [,1078] [,1079]
#&gt;         [,1080] [,1081] [,1082] [,1083] [,1084] [,1085] [,1086] [,1087] [,1088] [,1089] [,1090] [,1091]
#&gt;         [,1092] [,1093] [,1094] [,1095] [,1096] [,1097] [,1098] [,1099] [,1100] [,1101] [,1102] [,1103]
#&gt;         [,1104] [,1105] [,1106] [,1107] [,1108] [,1109] [,1110] [,1111] [,1112] [,1113] [,1114] [,1115]
#&gt;         [,1116] [,1117] [,1118] [,1119] [,1120] [,1121] [,1122] [,1123] [,1124] [,1125] [,1126] [,1127]
#&gt;         [,1128] [,1129] [,1130] [,1131] [,1132] [,1133] [,1134] [,1135] [,1136] [,1137] [,1138] [,1139]
#&gt;         [,1140] [,1141] [,1142] [,1143] [,1144] [,1145] [,1146] [,1147] [,1148] [,1149] [,1150] [,1151]
#&gt;         [,1152] [,1153] [,1154] [,1155] [,1156] [,1157] [,1158] [,1159] [,1160] [,1161] [,1162] [,1163]
#&gt;         [,1164] [,1165] [,1166] [,1167] [,1168] [,1169] [,1170] [,1171] [,1172] [,1173] [,1174] [,1175]
#&gt;         [,1176] [,1177] [,1178] [,1179] [,1180] [,1181] [,1182] [,1183] [,1184] [,1185] [,1186] [,1187]
#&gt;         [,1188] [,1189] [,1190] [,1191] [,1192] [,1193] [,1194] [,1195] [,1196] [,1197] [,1198] [,1199]
#&gt;         [,1200] [,1201] [,1202] [,1203] [,1204] [,1205] [,1206] [,1207] [,1208] [,1209] [,1210] [,1211]
#&gt;         [,1212] [,1213] [,1214] [,1215] [,1216] [,1217] [,1218] [,1219] [,1220] [,1221] [,1222] [,1223]
#&gt;         [,1224] [,1225] [,1226] [,1227] [,1228] [,1229] [,1230] [,1231] [,1232] [,1233] [,1234] [,1235]
#&gt;         [,1236] [,1237] [,1238] [,1239] [,1240] [,1241] [,1242] [,1243] [,1244] [,1245] [,1246] [,1247]
#&gt;         [,1248] [,1249] [,1250] [,1251] [,1252] [,1253] [,1254] [,1255] [,1256] [,1257] [,1258] [,1259]
#&gt;         [,1260] [,1261] [,1262] [,1263] [,1264] [,1265] [,1266] [,1267] [,1268] [,1269] [,1270] [,1271]
#&gt;         [,1272] [,1273] [,1274] [,1275] [,1276] [,1277] [,1278] [,1279] [,1280] [,1281] [,1282] [,1283]
#&gt;         [,1284] [,1285] [,1286] [,1287] [,1288] [,1289] [,1290] [,1291] [,1292] [,1293] [,1294] [,1295]
#&gt;         [,1296] [,1297] [,1298] [,1299] [,1300] [,1301] [,1302] [,1303] [,1304] [,1305] [,1306] [,1307]
#&gt;         [,1308] [,1309] [,1310] [,1311] [,1312] [,1313] [,1314] [,1315] [,1316] [,1317] [,1318] [,1319]
#&gt;         [,1320] [,1321] [,1322] [,1323] [,1324] [,1325] [,1326] [,1327] [,1328] [,1329] [,1330] [,1331]
#&gt;         [,1332] [,1333] [,1334] [,1335] [,1336] [,1337] [,1338] [,1339] [,1340] [,1341] [,1342] [,1343]
#&gt;         [,1344] [,1345] [,1346] [,1347] [,1348] [,1349] [,1350] [,1351] [,1352] [,1353] [,1354] [,1355]
#&gt;         [,1356] [,1357] [,1358] [,1359] [,1360] [,1361] [,1362] [,1363] [,1364] [,1365] [,1366] [,1367]
#&gt;         [,1368] [,1369] [,1370] [,1371] [,1372] [,1373] [,1374] [,1375] [,1376] [,1377] [,1378] [,1379]
#&gt;         [,1380] [,1381] [,1382] [,1383] [,1384] [,1385] [,1386] [,1387] [,1388] [,1389] [,1390] [,1391]
#&gt;         [,1392] [,1393] [,1394] [,1395] [,1396] [,1397] [,1398] [,1399] [,1400] [,1401] [,1402] [,1403]
#&gt;         [,1404] [,1405] [,1406] [,1407] [,1408] [,1409] [,1410] [,1411] [,1412] [,1413] [,1414] [,1415]
#&gt;         [,1416] [,1417] [,1418] [,1419] [,1420] [,1421] [,1422] [,1423] [,1424] [,1425] [,1426] [,1427]
#&gt;         [,1428] [,1429] [,1430] [,1431] [,1432] [,1433] [,1434] [,1435] [,1436] [,1437] [,1438] [,1439]
#&gt;         [,1440] [,1441] [,1442] [,1443] [,1444] [,1445] [,1446] [,1447] [,1448] [,1449] [,1450] [,1451]
#&gt;         [,1452] [,1453] [,1454] [,1455] [,1456] [,1457] [,1458] [,1459] [,1460] [,1461] [,1462] [,1463]
#&gt;         [,1464] [,1465] [,1466] [,1467] [,1468] [,1469] [,1470] [,1471] [,1472] [,1473] [,1474] [,1475]
#&gt;         [,1476] [,1477] [,1478] [,1479] [,1480] [,1481] [,1482] [,1483] [,1484] [,1485] [,1486] [,1487]
#&gt;         [,1488] [,1489] [,1490] [,1491] [,1492] [,1493] [,1494] [,1495] [,1496] [,1497] [,1498] [,1499]
#&gt;         [,1500] [,1501] [,1502] [,1503] [,1504] [,1505] [,1506] [,1507] [,1508] [,1509] [,1510] [,1511]
#&gt;         [,1512] [,1513] [,1514] [,1515] [,1516] [,1517] [,1518] [,1519] [,1520] [,1521] [,1522] [,1523]
#&gt;         [,1524] [,1525] [,1526] [,1527] [,1528] [,1529] [,1530] [,1531] [,1532] [,1533] [,1534] [,1535]
#&gt;         [,1536] [,1537] [,1538] [,1539] [,1540] [,1541] [,1542] [,1543] [,1544] [,1545] [,1546] [,1547]
#&gt;         [,1548] [,1549] [,1550] [,1551] [,1552] [,1553] [,1554] [,1555] [,1556] [,1557] [,1558] [,1559]
#&gt;         [,1560] [,1561] [,1562] [,1563] [,1564] [,1565] [,1566] [,1567] [,1568] [,1569] [,1570] [,1571]
#&gt;         [,1572] [,1573] [,1574] [,1575] [,1576] [,1577] [,1578] [,1579] [,1580] [,1581] [,1582] [,1583]
#&gt;         [,1584] [,1585] [,1586] [,1587] [,1588] [,1589] [,1590] [,1591] [,1592] [,1593] [,1594] [,1595]
#&gt;         [,1596] [,1597] [,1598] [,1599] [,1600] [,1601] [,1602] [,1603] [,1604] [,1605] [,1606] [,1607]
#&gt;         [,1608] [,1609] [,1610] [,1611] [,1612] [,1613] [,1614] [,1615] [,1616] [,1617] [,1618] [,1619]
#&gt;         [,1620] [,1621] [,1622] [,1623] [,1624] [,1625] [,1626] [,1627] [,1628] [,1629] [,1630] [,1631]
#&gt;         [,1632] [,1633] [,1634] [,1635] [,1636] [,1637] [,1638] [,1639] [,1640] [,1641] [,1642] [,1643]
#&gt;         [,1644] [,1645] [,1646] [,1647] [,1648] [,1649] [,1650] [,1651] [,1652] [,1653] [,1654] [,1655]
#&gt;         [,1656] [,1657] [,1658] [,1659] [,1660] [,1661] [,1662] [,1663] [,1664] [,1665] [,1666] [,1667]
#&gt;         [,1668] [,1669] [,1670] [,1671] [,1672] [,1673] [,1674] [,1675] [,1676] [,1677] [,1678] [,1679]
#&gt;         [,1680] [,1681] [,1682] [,1683] [,1684] [,1685] [,1686] [,1687] [,1688] [,1689] [,1690] [,1691]
#&gt;         [,1692] [,1693] [,1694] [,1695] [,1696] [,1697] [,1698] [,1699] [,1700] [,1701] [,1702] [,1703]
#&gt;         [,1704] [,1705] [,1706] [,1707] [,1708] [,1709] [,1710] [,1711] [,1712] [,1713] [,1714] [,1715]
#&gt;         [,1716] [,1717] [,1718] [,1719] [,1720] [,1721] [,1722] [,1723] [,1724] [,1725] [,1726] [,1727]
#&gt;         [,1728] [,1729] [,1730] [,1731] [,1732] [,1733] [,1734] [,1735] [,1736] [,1737] [,1738] [,1739]
#&gt;         [,1740] [,1741] [,1742] [,1743] [,1744] [,1745] [,1746] [,1747] [,1748] [,1749] [,1750] [,1751]
#&gt;         [,1752] [,1753] [,1754] [,1755] [,1756] [,1757] [,1758] [,1759] [,1760] [,1761] [,1762] [,1763]
#&gt;         [,1764] [,1765] [,1766] [,1767] [,1768] [,1769] [,1770] [,1771] [,1772] [,1773] [,1774] [,1775]
#&gt;         [,1776] [,1777] [,1778] [,1779] [,1780] [,1781] [,1782] [,1783] [,1784] [,1785] [,1786] [,1787]
#&gt;         [,1788] [,1789] [,1790] [,1791] [,1792] [,1793] [,1794] [,1795] [,1796] [,1797] [,1798] [,1799]
#&gt;         [,1800] [,1801] [,1802] [,1803] [,1804] [,1805] [,1806] [,1807] [,1808] [,1809] [,1810] [,1811]
#&gt;         [,1812] [,1813] [,1814] [,1815] [,1816] [,1817] [,1818] [,1819] [,1820] [,1821] [,1822] [,1823]
#&gt;         [,1824] [,1825] [,1826] [,1827] [,1828] [,1829] [,1830] [,1831] [,1832] [,1833] [,1834] [,1835]
#&gt;         [,1836] [,1837] [,1838] [,1839] [,1840] [,1841] [,1842] [,1843] [,1844] [,1845] [,1846] [,1847]
#&gt;         [,1848] [,1849] [,1850] [,1851] [,1852] [,1853] [,1854] [,1855] [,1856] [,1857] [,1858] [,1859]
#&gt;         [,1860] [,1861] [,1862] [,1863] [,1864] [,1865] [,1866] [,1867] [,1868] [,1869] [,1870] [,1871]
#&gt;         [,1872] [,1873] [,1874] [,1875] [,1876] [,1877] [,1878] [,1879] [,1880] [,1881] [,1882] [,1883]
#&gt;         [,1884] [,1885] [,1886] [,1887] [,1888] [,1889] [,1890] [,1891] [,1892] [,1893] [,1894] [,1895]
#&gt;         [,1896] [,1897] [,1898] [,1899] [,1900] [,1901] [,1902] [,1903] [,1904] [,1905] [,1906] [,1907]
#&gt;         [,1908] [,1909] [,1910] [,1911] [,1912] [,1913] [,1914] [,1915] [,1916] [,1917] [,1918] [,1919]
#&gt;         [,1920] [,1921] [,1922] [,1923] [,1924] [,1925] [,1926] [,1927] [,1928] [,1929] [,1930] [,1931]
#&gt;         [,1932] [,1933] [,1934] [,1935] [,1936] [,1937] [,1938] [,1939] [,1940] [,1941] [,1942] [,1943]
#&gt;         [,1944] [,1945] [,1946] [,1947] [,1948] [,1949] [,1950] [,1951] [,1952] [,1953] [,1954] [,1955]
#&gt;         [,1956] [,1957] [,1958] [,1959] [,1960] [,1961] [,1962] [,1963] [,1964] [,1965] [,1966] [,1967]
#&gt;         [,1968] [,1969] [,1970] [,1971] [,1972] [,1973] [,1974] [,1975] [,1976] [,1977] [,1978] [,1979]
#&gt;         [,1980] [,1981] [,1982] [,1983] [,1984] [,1985] [,1986] [,1987] [,1988] [,1989] [,1990] [,1991]
#&gt;         [,1992] [,1993] [,1994] [,1995] [,1996] [,1997] [,1998] [,1999] [,2000] [,2001] [,2002] [,2003]
#&gt;         [,2004] [,2005] [,2006] [,2007] [,2008] [,2009] [,2010] [,2011] [,2012] [,2013] [,2014] [,2015]
#&gt;         [,2016] [,2017] [,2018] [,2019] [,2020] [,2021] [,2022] [,2023] [,2024] [,2025] [,2026] [,2027]
#&gt;         [,2028] [,2029] [,2030] [,2031] [,2032] [,2033] [,2034] [,2035] [,2036] [,2037] [,2038] [,2039]
#&gt;         [,2040] [,2041] [,2042] [,2043] [,2044] [,2045] [,2046] [,2047] [,2048] [,2049] [,2050] [,2051]
#&gt;         [,2052] [,2053] [,2054] [,2055] [,2056] [,2057] [,2058] [,2059] [,2060] [,2061] [,2062] [,2063]
#&gt;         [,2064] [,2065] [,2066] [,2067] [,2068] [,2069] [,2070] [,2071] [,2072] [,2073] [,2074] [,2075]
#&gt;         [,2076] [,2077] [,2078] [,2079] [,2080] [,2081] [,2082] [,2083] [,2084] [,2085] [,2086] [,2087]
#&gt;         [,2088] [,2089] [,2090] [,2091] [,2092] [,2093] [,2094] [,2095] [,2096] [,2097] [,2098] [,2099]
#&gt;         [,2100] [,2101] [,2102] [,2103] [,2104] [,2105] [,2106] [,2107] [,2108] [,2109] [,2110] [,2111]
#&gt;         [,2112] [,2113] [,2114] [,2115] [,2116] [,2117] [,2118] [,2119] [,2120] [,2121] [,2122] [,2123]
#&gt;         [,2124] [,2125] [,2126] [,2127] [,2128] [,2129] [,2130] [,2131] [,2132] [,2133] [,2134] [,2135]
#&gt;         [,2136] [,2137] [,2138] [,2139] [,2140] [,2141] [,2142] [,2143] [,2144] [,2145] [,2146] [,2147]
#&gt;         [,2148] [,2149] [,2150] [,2151] [,2152] [,2153] [,2154] [,2155] [,2156] [,2157] [,2158] [,2159]
#&gt;         [,2160] [,2161] [,2162] [,2163] [,2164] [,2165] [,2166] [,2167] [,2168] [,2169] [,2170] [,2171]
#&gt;         [,2172] [,2173] [,2174] [,2175] [,2176] [,2177] [,2178] [,2179] [,2180] [,2181] [,2182] [,2183]
#&gt;         [,2184] [,2185] [,2186] [,2187] [,2188] [,2189] [,2190] [,2191] [,2192] [,2193] [,2194] [,2195]
#&gt;         [,2196] [,2197] [,2198] [,2199] [,2200] [,2201] [,2202] [,2203] [,2204] [,2205] [,2206] [,2207]
#&gt;         [,2208] [,2209] [,2210] [,2211] [,2212] [,2213] [,2214] [,2215] [,2216] [,2217] [,2218] [,2219]
#&gt;         [,2220] [,2221] [,2222] [,2223] [,2224] [,2225] [,2226] [,2227] [,2228] [,2229] [,2230] [,2231]
#&gt;         [,2232] [,2233] [,2234] [,2235] [,2236] [,2237] [,2238] [,2239] [,2240] [,2241] [,2242] [,2243]
#&gt;         [,2244] [,2245] [,2246] [,2247] [,2248] [,2249] [,2250] [,2251] [,2252] [,2253] [,2254] [,2255]
#&gt;         [,2256] [,2257] [,2258] [,2259] [,2260] [,2261] [,2262] [,2263] [,2264] [,2265] [,2266] [,2267]
#&gt;         [,2268] [,2269] [,2270] [,2271] [,2272] [,2273] [,2274] [,2275] [,2276] [,2277] [,2278] [,2279]
#&gt;         [,2280] [,2281] [,2282] [,2283] [,2284] [,2285] [,2286] [,2287] [,2288] [,2289] [,2290] [,2291]
#&gt;         [,2292] [,2293] [,2294] [,2295] [,2296] [,2297] [,2298] [,2299] [,2300] [,2301] [,2302] [,2303]
#&gt;         [,2304] [,2305] [,2306] [,2307] [,2308] [,2309] [,2310] [,2311] [,2312] [,2313] [,2314] [,2315]
#&gt;         [,2316] [,2317] [,2318] [,2319] [,2320] [,2321] [,2322] [,2323] [,2324] [,2325] [,2326] [,2327]
#&gt;         [,2328] [,2329] [,2330] [,2331] [,2332] [,2333] [,2334] [,2335] [,2336] [,2337] [,2338] [,2339]
#&gt;         [,2340] [,2341] [,2342] [,2343] [,2344] [,2345] [,2346] [,2347] [,2348] [,2349] [,2350] [,2351]
#&gt;         [,2352] [,2353] [,2354] [,2355] [,2356] [,2357] [,2358] [,2359] [,2360] [,2361] [,2362] [,2363]
#&gt;         [,2364] [,2365] [,2366] [,2367] [,2368] [,2369] [,2370] [,2371] [,2372] [,2373] [,2374] [,2375]
#&gt;         [,2376] [,2377] [,2378] [,2379] [,2380] [,2381] [,2382] [,2383] [,2384] [,2385] [,2386] [,2387]
#&gt;         [,2388] [,2389] [,2390] [,2391] [,2392] [,2393] [,2394] [,2395] [,2396] [,2397] [,2398] [,2399]
#&gt;         [,2400] [,2401] [,2402] [,2403] [,2404] [,2405] [,2406] [,2407] [,2408] [,2409] [,2410] [,2411]
#&gt;         [,2412] [,2413] [,2414] [,2415] [,2416] [,2417] [,2418] [,2419] [,2420] [,2421] [,2422] [,2423]
#&gt;         [,2424] [,2425] [,2426] [,2427] [,2428] [,2429] [,2430] [,2431] [,2432] [,2433] [,2434] [,2435]
#&gt;         [,2436] [,2437] [,2438] [,2439] [,2440] [,2441] [,2442] [,2443] [,2444] [,2445] [,2446] [,2447]
#&gt;         [,2448] [,2449] [,2450] [,2451] [,2452] [,2453] [,2454] [,2455] [,2456] [,2457] [,2458] [,2459]
#&gt;         [,2460] [,2461] [,2462] [,2463] [,2464] [,2465] [,2466] [,2467] [,2468] [,2469] [,2470] [,2471]
#&gt;         [,2472] [,2473] [,2474] [,2475] [,2476] [,2477] [,2478] [,2479] [,2480] [,2481] [,2482] [,2483]
#&gt;         [,2484] [,2485] [,2486] [,2487] [,2488] [,2489] [,2490] [,2491] [,2492] [,2493] [,2494] [,2495]
#&gt;         [,2496] [,2497] [,2498] [,2499] [,2500] [,2501] [,2502] [,2503] [,2504] [,2505] [,2506] [,2507]
#&gt;         [,2508] [,2509] [,2510] [,2511] [,2512] [,2513] [,2514] [,2515] [,2516] [,2517] [,2518] [,2519]
#&gt;         [,2520] [,2521] [,2522] [,2523] [,2524] [,2525] [,2526] [,2527] [,2528] [,2529] [,2530] [,2531]
#&gt;         [,2532] [,2533] [,2534] [,2535] [,2536] [,2537] [,2538] [,2539] [,2540] [,2541] [,2542] [,2543]
#&gt;         [,2544] [,2545] [,2546] [,2547] [,2548] [,2549] [,2550] [,2551] [,2552] [,2553] [,2554] [,2555]
#&gt;         [,2556] [,2557] [,2558] [,2559] [,2560] [,2561] [,2562] [,2563] [,2564] [,2565] [,2566] [,2567]
#&gt;         [,2568] [,2569] [,2570] [,2571] [,2572] [,2573] [,2574] [,2575] [,2576] [,2577] [,2578] [,2579]
#&gt;         [,2580] [,2581] [,2582] [,2583] [,2584] [,2585] [,2586] [,2587] [,2588] [,2589] [,2590] [,2591]
#&gt;         [,2592] [,2593] [,2594] [,2595] [,2596] [,2597] [,2598] [,2599] [,2600] [,2601] [,2602] [,2603]
#&gt;         [,2604] [,2605] [,2606] [,2607] [,2608] [,2609] [,2610] [,2611] [,2612] [,2613] [,2614] [,2615]
#&gt;         [,2616] [,2617] [,2618] [,2619] [,2620] [,2621] [,2622] [,2623] [,2624] [,2625] [,2626] [,2627]
#&gt;         [,2628] [,2629] [,2630] [,2631] [,2632] [,2633] [,2634] [,2635] [,2636] [,2637] [,2638] [,2639]
#&gt;         [,2640] [,2641] [,2642] [,2643] [,2644] [,2645] [,2646] [,2647] [,2648] [,2649] [,2650] [,2651]
#&gt;         [,2652] [,2653] [,2654] [,2655] [,2656] [,2657] [,2658] [,2659] [,2660] [,2661] [,2662] [,2663]
#&gt;         [,2664] [,2665] [,2666] [,2667] [,2668] [,2669] [,2670] [,2671] [,2672] [,2673] [,2674] [,2675]
#&gt;         [,2676] [,2677] [,2678] [,2679] [,2680] [,2681] [,2682] [,2683] [,2684] [,2685] [,2686] [,2687]
#&gt;         [,2688] [,2689] [,2690] [,2691] [,2692] [,2693] [,2694] [,2695] [,2696] [,2697] [,2698] [,2699]
#&gt;         [,2700] [,2701] [,2702] [,2703] [,2704] [,2705] [,2706] [,2707] [,2708] [,2709] [,2710] [,2711]
#&gt;         [,2712] [,2713] [,2714] [,2715] [,2716] [,2717] [,2718] [,2719] [,2720] [,2721] [,2722] [,2723]
#&gt;         [,2724] [,2725] [,2726] [,2727] [,2728] [,2729] [,2730] [,2731] [,2732] [,2733] [,2734] [,2735]
#&gt;         [,2736] [,2737] [,2738] [,2739] [,2740] [,2741] [,2742] [,2743] [,2744] [,2745] [,2746] [,2747]
#&gt;         [,2748] [,2749] [,2750] [,2751] [,2752] [,2753] [,2754] [,2755] [,2756] [,2757] [,2758] [,2759]
#&gt;         [,2760] [,2761] [,2762] [,2763] [,2764] [,2765] [,2766] [,2767] [,2768] [,2769] [,2770] [,2771]
#&gt;         [,2772] [,2773] [,2774] [,2775] [,2776] [,2777] [,2778] [,2779] [,2780] [,2781] [,2782] [,2783]
#&gt;         [,2784] [,2785] [,2786] [,2787] [,2788] [,2789] [,2790] [,2791] [,2792] [,2793] [,2794] [,2795]
#&gt;         [,2796] [,2797] [,2798] [,2799] [,2800] [,2801] [,2802] [,2803] [,2804] [,2805] [,2806] [,2807]
#&gt;         [,2808] [,2809] [,2810] [,2811] [,2812] [,2813] [,2814] [,2815] [,2816] [,2817] [,2818] [,2819]
#&gt;         [,2820] [,2821] [,2822] [,2823] [,2824] [,2825] [,2826] [,2827] [,2828] [,2829] [,2830] [,2831]
#&gt;         [,2832] [,2833] [,2834] [,2835] [,2836] [,2837] [,2838] [,2839] [,2840] [,2841] [,2842] [,2843]
#&gt;         [,2844] [,2845] [,2846] [,2847] [,2848] [,2849] [,2850] [,2851] [,2852] [,2853] [,2854] [,2855]
#&gt;         [,2856] [,2857] [,2858] [,2859] [,2860] [,2861] [,2862] [,2863] [,2864] [,2865] [,2866] [,2867]
#&gt;         [,2868] [,2869] [,2870] [,2871] [,2872] [,2873] [,2874] [,2875] [,2876] [,2877] [,2878] [,2879]
#&gt;         [,2880]
#&gt;  [ reached getOption("max.print") -- omitted 3840 rows ]
```

---
# What do we have? [`stars`](https://CRAN.R-project.org/package=stars)


```r
dim(ras)
#&gt;    x    y 
#&gt; 3840 2880
ncell(ras)
#&gt;        x 
#&gt; 11059200
st_bbox(ras)
#&gt; xmin ymin xmax ymax 
#&gt;  -71   43  -55   55
```

---
# What do we have? [`stars`](https://CRAN.R-project.org/package=stars)


```r
ras_crs &lt;- st_crs(ras)
class(ras_crs)
#&gt; [1] "crs"
ras_crs
#&gt; Coordinate Reference System:
#&gt;   User input: WGS 84 
#&gt;   wkt:
#&gt; GEOGCRS["WGS 84",
#&gt;     DATUM["World Geodetic System 1984",
#&gt;         ELLIPSOID["WGS 84",6378137,298.257223563,
#&gt;             LENGTHUNIT["metre",1]]],
#&gt;     PRIMEM["Greenwich",0,
#&gt;         ANGLEUNIT["degree",0.0174532925199433]],
#&gt;     CS[ellipsoidal,2],
#&gt;         AXIS["geodetic latitude (Lat)",north,
#&gt;             ORDER[1],
#&gt;             ANGLEUNIT["degree",0.0174532925199433]],
#&gt;         AXIS["geodetic longitude (Lon)",east,
#&gt;             ORDER[2],
#&gt;             ANGLEUNIT["degree",0.0174532925199433]],
#&gt;     ID["EPSG",4326]]
```

---
# What do we have? [`stars`](https://CRAN.R-project.org/package=stars)


```r
ras_crs$input
#&gt; [1] "WGS 84"
ras_crs$proj4string
#&gt; [1] "+proj=longlat +datum=WGS84 +no_defs"
ras_crs$epsg
#&gt; [1] 4326
```
--

- https://epsg.io/
- https://epsg.io/4326


---
# Conversion between [`stars`](https://CRAN.R-project.org/package=stars) and [`raster`](https://CRAN.R-project.org/package=raster)


### Use a temporary file (see above)

--


```r
rar_c &lt;- st_as_stars(rar) 
class(rar_c)
#&gt; [1] "stars"
```
--


```r
ras_c &lt;- as(ras, "Raster") 
class(ras_c)
#&gt; [1] "RasterLayer"
#&gt; attr(,"package")
#&gt; [1] "raster"
```


---
# Basic computations with [`raster`](https://CRAN.R-project.org/package=raster)


```r
class(rar[,])
#&gt; [1] "integer"
rar[1, 1]
#&gt;     
#&gt; 457
rar[1:10, 11:20]
#&gt;   [1] 452 455 456 454 451 450 449 447 446 442 493 502 512 507 484 472 468 462 450 440 529 532 536 523 491
#&gt;  [26] 468 459 454 440 431 504 507 503 485 464 451 441 435 431 428 459 455 445 438 434 431 429 429 429 428
#&gt;  [51] 444 439 434 431 434 435 431 430 433 441 438 435 436 443 449 445 441 441 445 449 439 444 447 449 450
#&gt;  [76] 447 443 440 439 440 441 442 443 444 444 444 441 440 443 452 469 460 448 443 443 447 446 445 447 454
mean(rar[,]) # or mean(as.matrix(rar))
#&gt; [1] 59.65972
quantile(rar[,])
#&gt;    0%   25%   50%   75%  100% 
#&gt; -4490   -94   114   439  1502
```

---
# Basic computations with [`raster`](https://CRAN.R-project.org/package=raster)


```r
rar2 &lt;- rar # create a copy 
rar2[rar &gt; 0] &lt;- NA  # filter
plot(rar2)
```

&lt;img src="index_files/figure-html/bc_rar1_2-1.png" style="display: block; margin: auto;" /&gt;


---
# Basic cell-based computations with [`stars`](https://CRAN.R-project.org/package=stars)


```r
# extract value
class(ras[[1]])
#&gt; [1] "units"
ras[[1]][1, 1]
#&gt; 457 [m]
ras[[1]][1:10, 11:20]
#&gt; Units: [m]
#&gt;       [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10]
#&gt;  [1,]  455  475  479  476  474  473  488  529  525   521
#&gt;  [2,]  453  472  473  471  476  474  494  533  533   518
#&gt;  [3,]  454  471  471  471  477  475  493  539  536   515
#&gt;  [4,]  454  469  470  472  472  473  487  530  528   511
#&gt;  [5,]  456  469  470  475  472  476  493  519  520   508
#&gt;  [6,]  459  474  471  481  478  488  508  523  525   507
#&gt;  [7,]  459  484  473  494  487  502  519  537  537   513
#&gt;  [8,]  467  497  479  514  495  502  525  554  542   522
#&gt;  [9,]  483  506  483  526  497  495  531  554  535   525
#&gt; [10,]  508  507  485  520  490  485  530  543  527   513
```

---
# Basic cell-based computations with [`stars`](https://CRAN.R-project.org/package=stars)


```r
mean(ras[[1]]) 
#&gt; 59.65972 [m]
quantile(ras[[1]])
#&gt; Units: [m]
#&gt;    0%   25%   50%   75%  100% 
#&gt; -4490   -94   114   439  1502
```

---
# Basic cell-based computations with [`stars`](https://CRAN.R-project.org/package=stars)
  

```r
ras2 &lt;- ras # create a copy
ras2[[1]][ras[[1]] &lt; units::as_units(0, "m")] &lt;- NA # filter
plot(ras2)
```

&lt;img src="index_files/figure-html/bc_rar1_3-1.png" style="display: block; margin: auto;" /&gt;


---
# &lt;svg viewBox="0 0 640 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;"&gt;  [ comment ]  &lt;path d="M257.981 272.971L63.638 467.314c-9.373 9.373-24.569 9.373-33.941 0L7.029 444.647c-9.357-9.357-9.375-24.522-.04-33.901L161.011 256 6.99 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L257.981 239.03c9.373 9.372 9.373 24.568 0 33.941zM640 456v-32c0-13.255-10.745-24-24-24H312c-13.255 0-24 10.745-24 24v32c0 13.255 10.745 24 24 24h304c13.255 0 24-10.745 24-24z"&gt;&lt;/path&gt;&lt;/svg&gt; Mean along latitude and longitude 

<div class="countdown" id="timer_5ffdca2f" style="right:0;bottom:0;" data-warnwhen="0">
<code class="countdown-time"><span class="countdown-digits minutes">15</span><span class="countdown-digits colon">:</span><span class="countdown-digits seconds">00</span></code>
</div>

### &lt;svg viewBox="0 0 576 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;"&gt;  [ comment ]  &lt;path d="M528.1 171.5L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6zM388.6 312.3l23.7 138.4L288 385.4l-124.3 65.3 23.7-138.4-100.6-98 139-20.2 62.2-126 62.2 126 139 20.2-100.6 98z"&gt;&lt;/path&gt;&lt;/svg&gt; Compute the mean elevation/depth along the latitude or/and longitude (optional: use elevation/depth filter)

--

### &lt;svg viewBox="0 0 576 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;"&gt;  [ comment ]  &lt;path d="M528.1 171.5L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6zM388.6 312.3l23.7 138.4L288 385.4l-124.3 65.3 23.7-138.4-100.6-98 139-20.2 62.2-126 62.2 126 139 20.2-100.6 98z"&gt;&lt;/path&gt;&lt;/svg&gt; &lt;svg viewBox="0 0 576 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;"&gt;  [ comment ]  &lt;path d="M528.1 171.5L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6zM388.6 312.3l23.7 138.4L288 385.4l-124.3 65.3 23.7-138.4-100.6-98 139-20.2 62.2-126 62.2 126 139 20.2-100.6 98z"&gt;&lt;/path&gt;&lt;/svg&gt; Create a function `mean_long_lat()` that computes mean elevation/depth along longitude and latitude (&lt;svg viewBox="0 0 576 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;"&gt;  [ comment ]  &lt;path d="M528.1 171.5L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6zM388.6 312.3l23.7 138.4L288 385.4l-124.3 65.3 23.7-138.4-100.6-98 139-20.2 62.2-126 62.2 126 139 20.2-100.6 98z"&gt;&lt;/path&gt;&lt;/svg&gt; &lt;svg viewBox="0 0 576 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;"&gt;  [ comment ]  &lt;path d="M528.1 171.5L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6zM388.6 312.3l23.7 138.4L288 385.4l-124.3 65.3 23.7-138.4-100.6-98 139-20.2 62.2-126 62.2 126 139 20.2-100.6 98z"&gt;&lt;/path&gt;&lt;/svg&gt; &lt;svg viewBox="0 0 576 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;"&gt;  [ comment ]  &lt;path d="M528.1 171.5L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6zM388.6 312.3l23.7 138.4L288 385.4l-124.3 65.3 23.7-138.4-100.6-98 139-20.2 62.2-126 62.2 126 139 20.2-100.6 98z"&gt;&lt;/path&gt;&lt;/svg&gt; include an argument to set an elevation/depth filter).

&lt;br&gt;


---
# Solution &lt;svg viewBox="0 0 576 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;"&gt;  [ comment ]  &lt;path d="M528.1 171.5L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6zM388.6 312.3l23.7 138.4L288 385.4l-124.3 65.3 23.7-138.4-100.6-98 139-20.2 62.2-126 62.2 126 139 20.2-100.6 98z"&gt;&lt;/path&gt;&lt;/svg&gt; 

### Compute the mean elevation/depth along the latitude or/and longitude (optional: use elevation/depth filter)



--



---
# Solution &lt;svg viewBox="0 0 576 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;"&gt;  [ comment ]  &lt;path d="M528.1 171.5L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6zM388.6 312.3l23.7 138.4L288 385.4l-124.3 65.3 23.7-138.4-100.6-98 139-20.2 62.2-126 62.2 126 139 20.2-100.6 98z"&gt;&lt;/path&gt;&lt;/svg&gt; &lt;svg viewBox="0 0 576 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;"&gt;  [ comment ]  &lt;path d="M528.1 171.5L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6zM388.6 312.3l23.7 138.4L288 385.4l-124.3 65.3 23.7-138.4-100.6-98 139-20.2 62.2-126 62.2 126 139 20.2-100.6 98z"&gt;&lt;/path&gt;&lt;/svg&gt;  / &lt;svg viewBox="0 0 576 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;"&gt;  [ comment ]  &lt;path d="M528.1 171.5L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6zM388.6 312.3l23.7 138.4L288 385.4l-124.3 65.3 23.7-138.4-100.6-98 139-20.2 62.2-126 62.2 126 139 20.2-100.6 98z"&gt;&lt;/path&gt;&lt;/svg&gt; &lt;svg viewBox="0 0 576 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;"&gt;  [ comment ]  &lt;path d="M528.1 171.5L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6zM388.6 312.3l23.7 138.4L288 385.4l-124.3 65.3 23.7-138.4-100.6-98 139-20.2 62.2-126 62.2 126 139 20.2-100.6 98z"&gt;&lt;/path&gt;&lt;/svg&gt; &lt;svg viewBox="0 0 576 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;"&gt;  [ comment ]  &lt;path d="M528.1 171.5L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6zM388.6 312.3l23.7 138.4L288 385.4l-124.3 65.3 23.7-138.4-100.6-98 139-20.2 62.2-126 62.2 126 139 20.2-100.6 98z"&gt;&lt;/path&gt;&lt;/svg&gt; 

### Create a function `mean_long_lat()` that computes mean elevation/depth along longitude and latitude (include an argument to set an elevation/depth filter).




---
# Solution &lt;svg viewBox="0 0 576 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;"&gt;  [ comment ]  &lt;path d="M528.1 171.5L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6zM388.6 312.3l23.7 138.4L288 385.4l-124.3 65.3 23.7-138.4-100.6-98 139-20.2 62.2-126 62.2 126 139 20.2-100.6 98z"&gt;&lt;/path&gt;&lt;/svg&gt; &lt;svg viewBox="0 0 576 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;"&gt;  [ comment ]  &lt;path d="M528.1 171.5L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6zM388.6 312.3l23.7 138.4L288 385.4l-124.3 65.3 23.7-138.4-100.6-98 139-20.2 62.2-126 62.2 126 139 20.2-100.6 98z"&gt;&lt;/path&gt;&lt;/svg&gt;  / &lt;svg viewBox="0 0 576 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;"&gt;  [ comment ]  &lt;path d="M528.1 171.5L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6zM388.6 312.3l23.7 138.4L288 385.4l-124.3 65.3 23.7-138.4-100.6-98 139-20.2 62.2-126 62.2 126 139 20.2-100.6 98z"&gt;&lt;/path&gt;&lt;/svg&gt; &lt;svg viewBox="0 0 576 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;"&gt;  [ comment ]  &lt;path d="M528.1 171.5L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6zM388.6 312.3l23.7 138.4L288 385.4l-124.3 65.3 23.7-138.4-100.6-98 139-20.2 62.2-126 62.2 126 139 20.2-100.6 98z"&gt;&lt;/path&gt;&lt;/svg&gt; &lt;svg viewBox="0 0 576 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;"&gt;  [ comment ]  &lt;path d="M528.1 171.5L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6zM388.6 312.3l23.7 138.4L288 385.4l-124.3 65.3 23.7-138.4-100.6-98 139-20.2 62.2-126 62.2 126 139 20.2-100.6 98z"&gt;&lt;/path&gt;&lt;/svg&gt; 




---
# Solution &lt;svg viewBox="0 0 576 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;"&gt;  [ comment ]  &lt;path d="M528.1 171.5L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6zM388.6 312.3l23.7 138.4L288 385.4l-124.3 65.3 23.7-138.4-100.6-98 139-20.2 62.2-126 62.2 126 139 20.2-100.6 98z"&gt;&lt;/path&gt;&lt;/svg&gt; &lt;svg viewBox="0 0 576 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;"&gt;  [ comment ]  &lt;path d="M528.1 171.5L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6zM388.6 312.3l23.7 138.4L288 385.4l-124.3 65.3 23.7-138.4-100.6-98 139-20.2 62.2-126 62.2 126 139 20.2-100.6 98z"&gt;&lt;/path&gt;&lt;/svg&gt;  / &lt;svg viewBox="0 0 576 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;"&gt;  [ comment ]  &lt;path d="M528.1 171.5L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6zM388.6 312.3l23.7 138.4L288 385.4l-124.3 65.3 23.7-138.4-100.6-98 139-20.2 62.2-126 62.2 126 139 20.2-100.6 98z"&gt;&lt;/path&gt;&lt;/svg&gt; &lt;svg viewBox="0 0 576 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;"&gt;  [ comment ]  &lt;path d="M528.1 171.5L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6zM388.6 312.3l23.7 138.4L288 385.4l-124.3 65.3 23.7-138.4-100.6-98 139-20.2 62.2-126 62.2 126 139 20.2-100.6 98z"&gt;&lt;/path&gt;&lt;/svg&gt; &lt;svg viewBox="0 0 576 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;"&gt;  [ comment ]  &lt;path d="M528.1 171.5L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6zM388.6 312.3l23.7 138.4L288 385.4l-124.3 65.3 23.7-138.4-100.6-98 139-20.2 62.2-126 62.2 126 139 20.2-100.6 98z"&gt;&lt;/path&gt;&lt;/svg&gt; 




---
# Solution &lt;svg viewBox="0 0 576 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;"&gt;  [ comment ]  &lt;path d="M528.1 171.5L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6zM388.6 312.3l23.7 138.4L288 385.4l-124.3 65.3 23.7-138.4-100.6-98 139-20.2 62.2-126 62.2 126 139 20.2-100.6 98z"&gt;&lt;/path&gt;&lt;/svg&gt; &lt;svg viewBox="0 0 576 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;"&gt;  [ comment ]  &lt;path d="M528.1 171.5L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6zM388.6 312.3l23.7 138.4L288 385.4l-124.3 65.3 23.7-138.4-100.6-98 139-20.2 62.2-126 62.2 126 139 20.2-100.6 98z"&gt;&lt;/path&gt;&lt;/svg&gt;  / &lt;svg viewBox="0 0 576 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;"&gt;  [ comment ]  &lt;path d="M528.1 171.5L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6zM388.6 312.3l23.7 138.4L288 385.4l-124.3 65.3 23.7-138.4-100.6-98 139-20.2 62.2-126 62.2 126 139 20.2-100.6 98z"&gt;&lt;/path&gt;&lt;/svg&gt; &lt;svg viewBox="0 0 576 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;"&gt;  [ comment ]  &lt;path d="M528.1 171.5L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6zM388.6 312.3l23.7 138.4L288 385.4l-124.3 65.3 23.7-138.4-100.6-98 139-20.2 62.2-126 62.2 126 139 20.2-100.6 98z"&gt;&lt;/path&gt;&lt;/svg&gt; &lt;svg viewBox="0 0 576 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;"&gt;  [ comment ]  &lt;path d="M528.1 171.5L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6zM388.6 312.3l23.7 138.4L288 385.4l-124.3 65.3 23.7-138.4-100.6-98 139-20.2 62.2-126 62.2 126 139 20.2-100.6 98z"&gt;&lt;/path&gt;&lt;/svg&gt; 




---
# Solution &lt;svg viewBox="0 0 576 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;"&gt;  [ comment ]  &lt;path d="M528.1 171.5L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6zM388.6 312.3l23.7 138.4L288 385.4l-124.3 65.3 23.7-138.4-100.6-98 139-20.2 62.2-126 62.2 126 139 20.2-100.6 98z"&gt;&lt;/path&gt;&lt;/svg&gt; &lt;svg viewBox="0 0 576 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;"&gt;  [ comment ]  &lt;path d="M528.1 171.5L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6zM388.6 312.3l23.7 138.4L288 385.4l-124.3 65.3 23.7-138.4-100.6-98 139-20.2 62.2-126 62.2 126 139 20.2-100.6 98z"&gt;&lt;/path&gt;&lt;/svg&gt;  / &lt;svg viewBox="0 0 576 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;"&gt;  [ comment ]  &lt;path d="M528.1 171.5L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6zM388.6 312.3l23.7 138.4L288 385.4l-124.3 65.3 23.7-138.4-100.6-98 139-20.2 62.2-126 62.2 126 139 20.2-100.6 98z"&gt;&lt;/path&gt;&lt;/svg&gt; &lt;svg viewBox="0 0 576 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;"&gt;  [ comment ]  &lt;path d="M528.1 171.5L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6zM388.6 312.3l23.7 138.4L288 385.4l-124.3 65.3 23.7-138.4-100.6-98 139-20.2 62.2-126 62.2 126 139 20.2-100.6 98z"&gt;&lt;/path&gt;&lt;/svg&gt; &lt;svg viewBox="0 0 576 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;"&gt;  [ comment ]  &lt;path d="M528.1 171.5L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6zM388.6 312.3l23.7 138.4L288 385.4l-124.3 65.3 23.7-138.4-100.6-98 139-20.2 62.2-126 62.2 126 139 20.2-100.6 98z"&gt;&lt;/path&gt;&lt;/svg&gt; 




---
# Solution &lt;svg viewBox="0 0 576 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;"&gt;  [ comment ]  &lt;path d="M528.1 171.5L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6zM388.6 312.3l23.7 138.4L288 385.4l-124.3 65.3 23.7-138.4-100.6-98 139-20.2 62.2-126 62.2 126 139 20.2-100.6 98z"&gt;&lt;/path&gt;&lt;/svg&gt; &lt;svg viewBox="0 0 576 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;"&gt;  [ comment ]  &lt;path d="M528.1 171.5L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6zM388.6 312.3l23.7 138.4L288 385.4l-124.3 65.3 23.7-138.4-100.6-98 139-20.2 62.2-126 62.2 126 139 20.2-100.6 98z"&gt;&lt;/path&gt;&lt;/svg&gt;  / &lt;svg viewBox="0 0 576 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;"&gt;  [ comment ]  &lt;path d="M528.1 171.5L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6zM388.6 312.3l23.7 138.4L288 385.4l-124.3 65.3 23.7-138.4-100.6-98 139-20.2 62.2-126 62.2 126 139 20.2-100.6 98z"&gt;&lt;/path&gt;&lt;/svg&gt; &lt;svg viewBox="0 0 576 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;"&gt;  [ comment ]  &lt;path d="M528.1 171.5L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6zM388.6 312.3l23.7 138.4L288 385.4l-124.3 65.3 23.7-138.4-100.6-98 139-20.2 62.2-126 62.2 126 139 20.2-100.6 98z"&gt;&lt;/path&gt;&lt;/svg&gt; &lt;svg viewBox="0 0 576 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;"&gt;  [ comment ]  &lt;path d="M528.1 171.5L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6zM388.6 312.3l23.7 138.4L288 385.4l-124.3 65.3 23.7-138.4-100.6-98 139-20.2 62.2-126 62.2 126 139 20.2-100.6 98z"&gt;&lt;/path&gt;&lt;/svg&gt; 







---
# Change map projection

- Reminder 

  - [&lt;svg viewBox="0 0 640 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;"&gt;  [ comment ]  &lt;path d="M640 51.2l-.3 12.2c-28.1.8-45 15.8-55.8 40.3-25 57.8-103.3 240-155.3 358.6H415l-81.9-193.1c-32.5 63.6-68.3 130-99.2 193.1-.3.3-15 0-15-.3C172 352.3 122.8 243.4 75.8 133.4 64.4 106.7 26.4 63.4.2 63.7c0-3.1-.3-10-.3-14.2h161.9v13.9c-19.2 1.1-52.8 13.3-43.3 34.2 21.9 49.7 103.6 240.3 125.6 288.6 15-29.7 57.8-109.2 75.3-142.8-13.9-28.3-58.6-133.9-72.8-160-9.7-17.8-36.1-19.4-55.8-19.7V49.8l142.5.3v13.1c-19.4.6-38.1 7.8-29.4 26.1 18.9 40 30.6 68.1 48.1 104.7 5.6-10.8 34.7-69.4 48.1-100.8 8.9-20.6-3.9-28.6-38.6-29.4.3-3.6 0-10.3.3-13.6 44.4-.3 111.1-.3 123.1-.6v13.6c-22.5.8-45.8 12.8-58.1 31.7l-59.2 122.8c6.4 16.1 63.3 142.8 69.2 156.7L559.2 91.8c-8.6-23.1-36.4-28.1-47.2-28.3V49.6l127.8 1.1.2.5z"&gt;&lt;/path&gt;&lt;/svg&gt; List of map projections](https://en.wikipedia.org/wiki/List_of_map_projections)

--

  - [Interactive examples](https://mathigon.org/course/circles/spheres-cones-cylinders#sphere-maps)

--

- Let's use the spherical Mercator 
  - https://epsg.io/
  - https://epsg.io/3857


---
# Change map projection with [`raster`](https://CRAN.R-project.org/package=raster)

- `raster` uses [Proj](https://proj.org/) strings 
- https://epsg.io/3857

--


```r
rar_crs &lt;- CRS("+proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +wktext  +no_defs")
```


---
# Change map projection with [`raster`](https://CRAN.R-project.org/package=raster)


```r
rar_t &lt;- projectRaster(rar, crs = rar_crs)
projection(rar_t)
#&gt; [1] "+proj=merc +a=6378137 +b=6378137 +lat_ts=0 +lon_0=0 +x_0=0 +y_0=0 +k=1 +units=m +nadgrids=@null +wktext +no_defs"
plot(rar)
```

&lt;img src="index_files/figure-html/projrar-1.png" style="display: block; margin: auto;" /&gt;


---
# Change map projection with [`stars`](https://CRAN.R-project.org/package=stars)


```r
ras_t &lt;- st_transform(ras, crs = 3857)
st_crs(ras_t)
#&gt; Coordinate Reference System:
#&gt;   User input: EPSG:3857 
#&gt;   wkt:
#&gt; PROJCRS["WGS 84 / Pseudo-Mercator",
#&gt;     BASEGEOGCRS["WGS 84",
#&gt;         DATUM["World Geodetic System 1984",
#&gt;             ELLIPSOID["WGS 84",6378137,298.257223563,
#&gt;                 LENGTHUNIT["metre",1]]],
#&gt;         PRIMEM["Greenwich",0,
#&gt;             ANGLEUNIT["degree",0.0174532925199433]],
#&gt;         ID["EPSG",4326]],
#&gt;     CONVERSION["Popular Visualisation Pseudo-Mercator",
#&gt;         METHOD["Popular Visualisation Pseudo Mercator",
#&gt;             ID["EPSG",1024]],
#&gt;         PARAMETER["Latitude of natural origin",0,
#&gt;             ANGLEUNIT["degree",0.0174532925199433],
#&gt;             ID["EPSG",8801]],
#&gt;         PARAMETER["Longitude of natural origin",0,
#&gt;             ANGLEUNIT["degree",0.0174532925199433],
#&gt;             ID["EPSG",8802]],
#&gt;         PARAMETER["False easting",0,
#&gt;             LENGTHUNIT["metre",1],
#&gt;             ID["EPSG",8806]],
#&gt;         PARAMETER["False northing",0,
#&gt;             LENGTHUNIT["metre",1],
#&gt;             ID["EPSG",8807]]],
#&gt;     CS[Cartesian,2],
#&gt;         AXIS["easting (X)",east,
#&gt;             ORDER[1],
#&gt;             LENGTHUNIT["metre",1]],
#&gt;         AXIS["northing (Y)",north,
#&gt;             ORDER[2],
#&gt;             LENGTHUNIT["metre",1]],
#&gt;     USAGE[
#&gt;         SCOPE["Web mapping and visualisation."],
#&gt;         AREA["World between 85.06°S and 85.06°N."],
#&gt;         BBOX[-85.06,-180,85.06,180]],
#&gt;     ID["EPSG",3857]]
```





---
# Crop 


```r
plot(rar)
rect(-65, 45, -60, 50)
```

&lt;img src="index_files/figure-html/crop0-1.png" style="display: block; margin: auto;" /&gt;

---
# Crop with [`raster`](https://CRAN.R-project.org/package=raster)


```r
rar_c &lt;- crop(rar, extent(-65, -60, 45, 50))
plot(rar_c)
```

&lt;img src="index_files/figure-html/crop_rar-1.png" style="display: block; margin: auto;" /&gt;

---
# Crop with [`stars`](https://CRAN.R-project.org/package=raster)


```r
ext &lt;- st_bbox(c(xmin = -65, xmax = -60, ymin = 45, ymax = 50), crs = 4326)
ras_c &lt;- st_crop(ras, ext)
plot(ras_c)
```

&lt;img src="index_files/figure-html/crop_ras-1.png" style="display: block; margin: auto;" /&gt;



---
# Mask 

Let's use a shapefile of the Gulf of the St-Lawrence 

&lt;svg viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;"&gt;  [ comment ]  &lt;path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"&gt;&lt;/path&gt;&lt;/svg&gt; https://www.marineregions.org/gazetteer.php?p=details&amp;id=4290


```r
(stl &lt;- sf::st_read("data/st_laurence.geojson"))
#&gt; Reading layer `data_stl2' from data source `/home/kevcaz/Projects/inSilecoInc/workshop_raster/data/st_laurence.geojson' using driver `GeoJSON'
#&gt; Simple feature collection with 1 feature and 10 fields
#&gt; geometry type:  POLYGON
#&gt; dimension:      XY
#&gt; bbox:           xmin: -74.86481 ymin: 44.9585 xmax: -54.70345 ymax: 52.22242
#&gt; geographic CRS: WGS 84
#&gt; Simple feature collection with 1 feature and 10 fields
#&gt; geometry type:  POLYGON
#&gt; dimension:      XY
#&gt; bbox:           xmin: -74.86481 ymin: 44.9585 xmax: -54.70345 ymax: 52.22242
#&gt; geographic CRS: WGS 84
#&gt;                   name id longitude latitude     min_x   min_y     max_x    max_y   area mrgid
#&gt; 1 Gulf of St. Lawrence 24 -61.56657 48.38072 -74.86481 44.9585 -54.70345 52.22242 290874  4290
#&gt;                         geometry
#&gt; 1 POLYGON ((-64.67242 47.7168...
```

---
# Mask 

Values outside of a given geometry set to `NA`


```r
plot(sf::st_geometry(stl))
```

&lt;img src="index_files/figure-html/plot_stl-1.png" style="display: block; margin: auto;" /&gt;


---
# Mask with [`raster`](https://CRAN.R-project.org/package=raster)


```r
rar_m &lt;- mask(rar, stl)
plot(rar_m)
```

&lt;img src="index_files/figure-html/rar_m-1.png" style="display: block; margin: auto;" /&gt;

---
# Mask with [`raster`](https://CRAN.R-project.org/package=raster)



```r
rar_mi &lt;- mask(rar, stl, inverse = TRUE)
plot(rar_mi)
```

&lt;img src="index_files/figure-html/rar_m2-1.png" style="display: block; margin: auto;" /&gt;

---
# Mask with [`stars`](https://CRAN.R-project.org/package=stars)


```r
ras_m &lt;- ras[stl]
plot(ras_m)
```

&lt;img src="index_files/figure-html/ras_m-1.png" style="display: block; margin: auto;" /&gt;

---
# Mask with [`stars`](https://CRAN.R-project.org/package=stars)


```r
stl_i &lt;- sf::st_difference(sf::st_as_sfc(st_bbox(ras)), stl)
plot(stl_i, col = 2)
```

&lt;img src="index_files/figure-html/ras_m1-1.png" style="display: block; margin: auto;" /&gt;


---
# Mask with [`stars`](https://CRAN.R-project.org/package=stars)


```r
ras_mi &lt;- ras[stl_i]
plot(ras_mi)
```

&lt;img src="index_files/figure-html/ras_m2-1.png" style="display: block; margin: auto;" /&gt;



---
# &lt;svg viewBox="0 0 640 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;"&gt;  [ comment ]  &lt;path d="M257.981 272.971L63.638 467.314c-9.373 9.373-24.569 9.373-33.941 0L7.029 444.647c-9.357-9.357-9.375-24.522-.04-33.901L161.011 256 6.99 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L257.981 239.03c9.373 9.372 9.373 24.568 0 33.941zM640 456v-32c0-13.255-10.745-24-24-24H312c-13.255 0-24 10.745-24 24v32c0 13.255 10.745 24 24 24h304c13.255 0 24-10.745 24-24z"&gt;&lt;/path&gt;&lt;/svg&gt; Mean depth of the St-Lawrence

- &lt;svg viewBox="0 0 576 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;"&gt;  [ comment ]  &lt;path d="M528.1 171.5L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6zM388.6 312.3l23.7 138.4L288 385.4l-124.3 65.3 23.7-138.4-100.6-98 139-20.2 62.2-126 62.2 126 139 20.2-100.6 98z"&gt;&lt;/path&gt;&lt;/svg&gt; Compute the mean depth of the St-Lawrence (Gulf and river)

- &lt;svg viewBox="0 0 576 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;"&gt;  [ comment ]  &lt;path d="M528.1 171.5L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6zM388.6 312.3l23.7 138.4L288 385.4l-124.3 65.3 23.7-138.4-100.6-98 139-20.2 62.2-126 62.2 126 139 20.2-100.6 98z"&gt;&lt;/path&gt;&lt;/svg&gt; &lt;svg viewBox="0 0 576 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;"&gt;  [ comment ]  &lt;path d="M528.1 171.5L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6zM388.6 312.3l23.7 138.4L288 385.4l-124.3 65.3 23.7-138.4-100.6-98 139-20.2 62.2-126 62.2 126 139 20.2-100.6 98z"&gt;&lt;/path&gt;&lt;/svg&gt; Compare the depth of the Gulf of the St-Lawrence and the depth of the St-Lawrence river (various solutions!)


<div class="countdown" id="timer_5ffdcb1a" style="right:0;bottom:0;" data-warnwhen="0">
<code class="countdown-time"><span class="countdown-digits minutes">10</span><span class="countdown-digits colon">:</span><span class="countdown-digits seconds">00</span></code>
</div>

---
# Solution &lt;svg viewBox="0 0 576 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;"&gt;  [ comment ]  &lt;path d="M528.1 171.5L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6zM388.6 312.3l23.7 138.4L288 385.4l-124.3 65.3 23.7-138.4-100.6-98 139-20.2 62.2-126 62.2 126 139 20.2-100.6 98z"&gt;&lt;/path&gt;&lt;/svg&gt;






---
# Solution &lt;svg viewBox="0 0 576 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;"&gt;  [ comment ]  &lt;path d="M528.1 171.5L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6zM388.6 312.3l23.7 138.4L288 385.4l-124.3 65.3 23.7-138.4-100.6-98 139-20.2 62.2-126 62.2 126 139 20.2-100.6 98z"&gt;&lt;/path&gt;&lt;/svg&gt; &lt;svg viewBox="0 0 576 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;"&gt;  [ comment ]  &lt;path d="M528.1 171.5L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6zM388.6 312.3l23.7 138.4L288 385.4l-124.3 65.3 23.7-138.4-100.6-98 139-20.2 62.2-126 62.2 126 139 20.2-100.6 98z"&gt;&lt;/path&gt;&lt;/svg&gt;

--



???

You can find other shapefile

---
# Solution &lt;svg viewBox="0 0 576 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;"&gt;  [ comment ]  &lt;path d="M528.1 171.5L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6zM388.6 312.3l23.7 138.4L288 385.4l-124.3 65.3 23.7-138.4-100.6-98 139-20.2 62.2-126 62.2 126 139 20.2-100.6 98z"&gt;&lt;/path&gt;&lt;/svg&gt; &lt;svg viewBox="0 0 576 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;"&gt;  [ comment ]  &lt;path d="M528.1 171.5L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6zM388.6 312.3l23.7 138.4L288 385.4l-124.3 65.3 23.7-138.4-100.6-98 139-20.2 62.2-126 62.2 126 139 20.2-100.6 98z"&gt;&lt;/path&gt;&lt;/svg&gt;



---
# Solution &lt;svg viewBox="0 0 576 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;"&gt;  [ comment ]  &lt;path d="M528.1 171.5L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6zM388.6 312.3l23.7 138.4L288 385.4l-124.3 65.3 23.7-138.4-100.6-98 139-20.2 62.2-126 62.2 126 139 20.2-100.6 98z"&gt;&lt;/path&gt;&lt;/svg&gt; &lt;svg viewBox="0 0 576 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;"&gt;  [ comment ]  &lt;path d="M528.1 171.5L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6zM388.6 312.3l23.7 138.4L288 385.4l-124.3 65.3 23.7-138.4-100.6-98 139-20.2 62.2-126 62.2 126 139 20.2-100.6 98z"&gt;&lt;/path&gt;&lt;/svg&gt;



---
# Solution &lt;svg viewBox="0 0 576 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;"&gt;  [ comment ]  &lt;path d="M528.1 171.5L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6zM388.6 312.3l23.7 138.4L288 385.4l-124.3 65.3 23.7-138.4-100.6-98 139-20.2 62.2-126 62.2 126 139 20.2-100.6 98z"&gt;&lt;/path&gt;&lt;/svg&gt; &lt;svg viewBox="0 0 576 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;"&gt;  [ comment ]  &lt;path d="M528.1 171.5L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6zM388.6 312.3l23.7 138.4L288 385.4l-124.3 65.3 23.7-138.4-100.6-98 139-20.2 62.2-126 62.2 126 139 20.2-100.6 98z"&gt;&lt;/path&gt;&lt;/svg&gt;




---
# Solution &lt;svg viewBox="0 0 576 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;"&gt;  [ comment ]  &lt;path d="M528.1 171.5L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6zM388.6 312.3l23.7 138.4L288 385.4l-124.3 65.3 23.7-138.4-100.6-98 139-20.2 62.2-126 62.2 126 139 20.2-100.6 98z"&gt;&lt;/path&gt;&lt;/svg&gt; &lt;svg viewBox="0 0 576 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;"&gt;  [ comment ]  &lt;path d="M528.1 171.5L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6zM388.6 312.3l23.7 138.4L288 385.4l-124.3 65.3 23.7-138.4-100.6-98 139-20.2 62.2-126 62.2 126 139 20.2-100.6 98z"&gt;&lt;/path&gt;&lt;/svg&gt;







---
# Warping/Resampling

### Work with rasters of different resolution 

---
# Warping/Resampling with [`raster`](https://CRAN.R-project.org/package=raster)


```r
# create a raster with the given resolution
mr &lt;- matrix(runif(21*21), 21, 21)
rar_template1 &lt;- raster(mr, xmn = -71, xmx = -55, ymn = 43, ymx = 55, 
    crs = projection(rar)) # create template
plot(rar_template1)
```

&lt;img src="index_files/figure-html/rar_warp-1.png" style="display: block; margin: auto;" /&gt;

---
# Warping/Resampling with [`raster`](https://CRAN.R-project.org/package=raster)


```r
rar_w1 &lt;- resample(rar, rar_template1)
plot(rar_w1)
```

&lt;img src="index_files/figure-html/rar_warp2-1.png" style="display: block; margin: auto;" /&gt;

---
# Warping/Resampling with [`raster`](https://CRAN.R-project.org/package=raster)


```r
rar_template2 &lt;- raster(xmn = -71, xmx = -55, ymn = 43, ymx = 55, 
  crs = projection(rar), resolution = .25) # create template
plot(resample(rar, rar_template1))
```

&lt;img src="index_files/figure-html/rar_warp3-1.png" style="display: block; margin: auto;" /&gt;


---
# Warping/Resampling with [`raster`](https://CRAN.R-project.org/package=raster)


```r
ras_template1 &lt;- st_as_stars(st_bbox(ras), nx = 21, ny = 21, 
  values = runif(21 * 21)) # create template
ras_w1 &lt;- st_warp(ras, ras_template1)
plot(ras_w1)
```

&lt;img src="index_files/figure-html/ras_warp-1.png" style="display: block; margin: auto;" /&gt;

&lt;!-- show how to do this with a second object --&gt;

---
# Warping/Resampling with [`stars`](https://CRAN.R-project.org/package=stars)


```r
ras_w2 &lt;- st_warp(ras, cellsize = 0.25, crs = st_crs(ras)) 
plot(st_warp(ras, ras_w2))
```

&lt;img src="index_files/figure-html/ras_warp2-1.png" style="display: block; margin: auto;" /&gt;




---
# Rasterize 

## Vectors &lt;svg viewBox="0 0 448 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;"&gt;  [ comment ]  &lt;path d="M190.5 66.9l22.2-22.2c9.4-9.4 24.6-9.4 33.9 0L441 239c9.4 9.4 9.4 24.6 0 33.9L246.6 467.3c-9.4 9.4-24.6 9.4-33.9 0l-22.2-22.2c-9.5-9.5-9.3-25 .4-34.3L311.4 296H24c-13.3 0-24-10.7-24-24v-32c0-13.3 10.7-24 24-24h287.4L190.9 101.2c-9.8-9.3-10-24.8-.4-34.3z"&gt;&lt;/path&gt;&lt;/svg&gt; Raster 

--

## Create a raster template 


---
# Rasterize with [`raster`](https://CRAN.R-project.org/package=raster)


```r
# not run
stl_r &lt;- rasterize(stl, rar)
plot(stl_r)
```


---
# Rasterize with [`stars`](https://CRAN.R-project.org/package=stars)


```r
stl_s &lt;- st_rasterize(stl, dy = .1, dx = .1)
plot(stl_s)
```

&lt;img src="index_files/figure-html/rasters1-1.png" style="display: block; margin: auto;" /&gt;





---
# Stack 

### - Collection of rasters 

### - Same extent/resolution

### - Multi-band rasters (satellite images)

### - Handle several rasters at once 


---
# Stack with [`raster`](https://CRAN.R-project.org/package=raster)


### 2 classes : `RasterBrick` and `RasterStack`

--

&gt; The main difference is that a RasterStack is loose collection of RasterLayer objects that can refer to different files (but must all have the same extent and resolution), whereas a RasterBrick can only point to a single file. 

.right[.font80[ &lt;svg viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;"&gt;  [ comment ]  &lt;path d="M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 110c23.196 0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627 0 12 5.373 12 12v100h12c6.627 0 12 5.373 12 12v24z"&gt;&lt;/path&gt;&lt;/svg&gt; https://rspatial.org/raster/spatial/4-rasterdata.html#rasterstack-and-rasterbrick]]

--

### We'll focus on `RasterStack`


---
# Stack with [`raster`](https://CRAN.R-project.org/package=raster)


```r
rar_stc &lt;- stack(list(bath_v1 = rar, bath_v2 = rar * 2)) # could be a file path
class(rar_stc) 
#&gt; [1] "RasterStack"
#&gt; attr(,"package")
#&gt; [1] "raster"
nlayers(rar_stc)
#&gt; [1] 2
```

--


```r
class(rar_stc[[1]]) 
#&gt; [1] "RasterLayer"
#&gt; attr(,"package")
#&gt; [1] "raster"
class(rar_stc[[2]]) 
#&gt; [1] "RasterLayer"
#&gt; attr(,"package")
#&gt; [1] "raster"
```

---
# Stack with [`raster`](https://CRAN.R-project.org/package=raster)


```r
plot(rar_stc)
```

&lt;img src="index_files/figure-html/rar_stc2-1.png" style="display: block; margin: auto;" /&gt;

---
# Stack with [`raster`](https://CRAN.R-project.org/package=raster)


```r
plot(crop(rar_stc, extent(-65, -60, 45, 50)))
```

&lt;img src="index_files/figure-html/rar_stc3-1.png" style="display: block; margin: auto;" /&gt;


---
# Stack with [`raster`](https://CRAN.R-project.org/package=raster)


```r
rar_sum &lt;- calc(rar_stc, fun = sum)
rar_sum
#&gt; class      : RasterLayer 
#&gt; dimensions : 2880, 3840, 11059200  (nrow, ncol, ncell)
#&gt; resolution : 0.004166667, 0.004166667  (x, y)
#&gt; extent     : -71, -55, 43, 55  (xmin, xmax, ymin, ymax)
#&gt; crs        : +proj=longlat +datum=WGS84 +no_defs 
#&gt; source     : memory
#&gt; names      : layer 
#&gt; values     : -13470, 4506  (min, max)
```

---
# Stack with [`raster`](https://CRAN.R-project.org/package=raster)



```r
plot(rar_sum) 
```

&lt;img src="index_files/figure-html/rar_stc5-1.png" style="display: block; margin: auto;" /&gt;


---
# Stack with [`stars`](https://CRAN.R-project.org/package=stars)


```r
ras
#&gt; stars object with 2 dimensions and 1 attribute
#&gt; attribute(s), summary of first 1e+05 cells:
#&gt;  bathy.tif [m]   
#&gt;  Min.   :-435.0  
#&gt;  1st Qu.:  23.0  
#&gt;  Median : 479.0  
#&gt;  Mean   : 299.5  
#&gt;  3rd Qu.: 540.0  
#&gt;  Max.   : 812.0  
#&gt; dimension(s):
#&gt;   from   to offset       delta refsys point values    
#&gt; x    1 3840    -71  0.00416667 WGS 84 FALSE   NULL [x]
#&gt; y    1 2880     55 -0.00416667 WGS 84 FALSE   NULL [y]
```

---
# Stack with [`stars`](https://CRAN.R-project.org/package=stars)


```r
ras_stc1 &lt;- c(ras, ras * 2)
names(ras_stc1) &lt;- c("bath_v1", "bath_v2")
ras_stc1
#&gt; stars object with 2 dimensions and 2 attributes
#&gt; attribute(s), summary of first 1e+05 cells:
#&gt;   bath_v1 [m]      bath_v2 [m]  
#&gt;  Min.   :-435.0   Min.   :-870  
#&gt;  1st Qu.:  23.0   1st Qu.:  46  
#&gt;  Median : 479.0   Median : 958  
#&gt;  Mean   : 299.5   Mean   : 599  
#&gt;  3rd Qu.: 540.0   3rd Qu.:1080  
#&gt;  Max.   : 812.0   Max.   :1624  
#&gt; dimension(s):
#&gt;   from   to offset       delta refsys point values    
#&gt; x    1 3840    -71  0.00416667 WGS 84 FALSE   NULL [x]
#&gt; y    1 2880     55 -0.00416667 WGS 84 FALSE   NULL [y]
```

---
# Stack with [`stars`](https://CRAN.R-project.org/package=stars)


```r
plot(ras_stc1)
```

&lt;img src="index_files/figure-html/ras_stc1b-1.png" style="display: block; margin: auto;" /&gt;

---
# Stack with [`stars`](https://CRAN.R-project.org/package=stars)



```r
ras_stc1[1] # or ras_stc1["bath_v1"]
#&gt; stars object with 2 dimensions and 1 attribute
#&gt; attribute(s), summary of first 1e+05 cells:
#&gt;   bath_v1 [m]    
#&gt;  Min.   :-435.0  
#&gt;  1st Qu.:  23.0  
#&gt;  Median : 479.0  
#&gt;  Mean   : 299.5  
#&gt;  3rd Qu.: 540.0  
#&gt;  Max.   : 812.0  
#&gt; dimension(s):
#&gt;   from   to offset       delta refsys point values    
#&gt; x    1 3840    -71  0.00416667 WGS 84 FALSE   NULL [x]
#&gt; y    1 2880     55 -0.00416667 WGS 84 FALSE   NULL [y]
```

---
# Stack with [`stars`](https://CRAN.R-project.org/package=stars)



```r
ras_stc1[2] # or ras_stc1["bath_v2"]
#&gt; stars object with 2 dimensions and 1 attribute
#&gt; attribute(s), summary of first 1e+05 cells:
#&gt;   bath_v2 [m]  
#&gt;  Min.   :-870  
#&gt;  1st Qu.:  46  
#&gt;  Median : 958  
#&gt;  Mean   : 599  
#&gt;  3rd Qu.:1080  
#&gt;  Max.   :1624  
#&gt; dimension(s):
#&gt;   from   to offset       delta refsys point values    
#&gt; x    1 3840    -71  0.00416667 WGS 84 FALSE   NULL [x]
#&gt; y    1 2880     55 -0.00416667 WGS 84 FALSE   NULL [y]
```


---
# Stack with [`stars`](https://CRAN.R-project.org/package=stars)


```r
library(dplyr)
ras_stc1 %&gt;% select("bath_v1")
#&gt; stars object with 2 dimensions and 1 attribute
#&gt; attribute(s), summary of first 1e+05 cells:
#&gt;   bath_v1 [m]    
#&gt;  Min.   :-435.0  
#&gt;  1st Qu.:  23.0  
#&gt;  Median : 479.0  
#&gt;  Mean   : 299.5  
#&gt;  3rd Qu.: 540.0  
#&gt;  Max.   : 812.0  
#&gt; dimension(s):
#&gt;   from   to offset       delta refsys point values    
#&gt; x    1 3840    -71  0.00416667 WGS 84 FALSE   NULL [x]
#&gt; y    1 2880     55 -0.00416667 WGS 84 FALSE   NULL [y]
```

---
# Stack with [`stars`](https://CRAN.R-project.org/package=stars)


```r
ras_stc1 %&gt;% mutate(bath_v3 = bath_v2 * 2)
#&gt; stars object with 2 dimensions and 3 attributes
#&gt; attribute(s), summary of first 1e+05 cells:
#&gt;   bath_v1 [m]      bath_v2 [m]    bath_v3 [m]   
#&gt;  Min.   :-435.0   Min.   :-870   Min.   :-1740  
#&gt;  1st Qu.:  23.0   1st Qu.:  46   1st Qu.:   92  
#&gt;  Median : 479.0   Median : 958   Median : 1916  
#&gt;  Mean   : 299.5   Mean   : 599   Mean   : 1198  
#&gt;  3rd Qu.: 540.0   3rd Qu.:1080   3rd Qu.: 2160  
#&gt;  Max.   : 812.0   Max.   :1624   Max.   : 3248  
#&gt; dimension(s):
#&gt;   from   to offset       delta refsys point values    
#&gt; x    1 3840    -71  0.00416667 WGS 84 FALSE   NULL [x]
#&gt; y    1 2880     55 -0.00416667 WGS 84 FALSE   NULL [y]
```

---
# Stack with [`stars`](https://CRAN.R-project.org/package=stars)


```r
ras_stc2 &lt;- c(ras, ras*2, along = "z")
ras_stc2
#&gt; stars object with 3 dimensions and 1 attribute
#&gt; attribute(s), summary of first 1e+05 cells:
#&gt;  bathy.tif [m]   
#&gt;  Min.   :-435.0  
#&gt;  1st Qu.:  23.0  
#&gt;  Median : 479.0  
#&gt;  Mean   : 299.5  
#&gt;  3rd Qu.: 540.0  
#&gt;  Max.   : 812.0  
#&gt; dimension(s):
#&gt;   from   to offset       delta refsys point values    
#&gt; x    1 3840    -71  0.00416667 WGS 84 FALSE   NULL [x]
#&gt; y    1 2880     55 -0.00416667 WGS 84 FALSE   NULL [y]
#&gt; z    1    2     NA          NA     NA    NA   NULL
```

---
# Stack with [`stars`](https://CRAN.R-project.org/package=stars)


```r
plot(ras_stc2)
```

&lt;img src="index_files/figure-html/ras_stc4-1.png" style="display: block; margin: auto;" /&gt;

---
# Stack with [`stars`](https://CRAN.R-project.org/package=stars)


```r
ext &lt;- st_bbox(c(xmin = -65, xmax = -60, ymin = 45, ymax = 50), crs = 4326)
plot(st_crop(ras_stc2, ext))
```

&lt;img src="index_files/figure-html/ras_stc5-1.png" style="display: block; margin: auto;" /&gt;


---
# Stack with [`stars`](https://CRAN.R-project.org/package=stars)


```r
(ras_ap &lt;- st_apply(ras_stc2, c(1, 2), sum))
#&gt; stars object with 2 dimensions and 1 attribute
#&gt; attribute(s), summary of first 1e+05 cells:
#&gt;       sum         
#&gt;  Min.   :-1305.0  
#&gt;  1st Qu.:   69.0  
#&gt;  Median : 1437.0  
#&gt;  Mean   :  898.6  
#&gt;  3rd Qu.: 1620.0  
#&gt;  Max.   : 2436.0  
#&gt; dimension(s):
#&gt;   from   to offset       delta refsys point values    
#&gt; x    1 3840    -71  0.00416667 WGS 84 FALSE   NULL [x]
#&gt; y    1 2880     55 -0.00416667 WGS 84 FALSE   NULL [y]
```

---
# Stack with [`stars`](https://CRAN.R-project.org/package=stars)


```r
plot(ras_ap)
```

&lt;img src="index_files/figure-html/ras_stc6b-1.png" style="display: block; margin: auto;" /&gt;


---
# &lt;svg viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;"&gt;  [ comment ]  &lt;path d="M243.2 189.9V258c26.1 5.9 49.3 15.6 73.6 22.3v-68.2c-26-5.8-49.4-15.5-73.6-22.2zm223.3-123c-34.3 15.9-76.5 31.9-117 31.9C296 98.8 251.7 64 184.3 64c-25 0-47.3 4.4-68 12 2.8-7.3 4.1-15.2 3.6-23.6C118.1 24 94.8 1.2 66.3 0 34.3-1.3 8 24.3 8 56c0 19 9.5 35.8 24 45.9V488c0 13.3 10.7 24 24 24h16c13.3 0 24-10.7 24-24v-94.4c28.3-12.1 63.6-22.1 114.4-22.1 53.6 0 97.8 34.8 165.2 34.8 48.2 0 86.7-16.3 122.5-40.9 8.7-6 13.8-15.8 13.8-26.4V95.9c.1-23.3-24.2-38.8-45.4-29zM169.6 325.5c-25.8 2.7-50 8.2-73.6 16.6v-70.5c26.2-9.3 47.5-15 73.6-17.4zM464 191c-23.6 9.8-46.3 19.5-73.6 23.9V286c24.8-3.4 51.4-11.8 73.6-26v70.5c-25.1 16.1-48.5 24.7-73.6 27.1V286c-27 3.7-47.9 1.5-73.6-5.6v67.4c-23.9-7.4-47.3-16.7-73.6-21.3V258c-19.7-4.4-40.8-6.8-73.6-3.8v-70c-22.4 3.1-44.6 10.2-73.6 20.9v-70.5c33.2-12.2 50.1-19.8 73.6-22v71.6c27-3.7 48.4-1.3 73.6 5.7v-67.4c23.7 7.4 47.2 16.7 73.6 21.3v68.4c23.7 5.3 47.6 6.9 73.6 2.7V143c27-4.8 52.3-13.6 73.6-22.5z"&gt;&lt;/path&gt;&lt;/svg&gt; Recap 


| Action                    | `raster`               | `stars`                |
|:--------------------------|:-----------------------|:-----------------------|
| Get projection            | `projection()`         | `st_crs()`             |
| Get bounding box          | `bbox()`               | `st_bbox()`            |
| Change projection         | `projectRaster()`      | `st_transform()`       |
| Crop                      | `crop()`               | `st_crop()`            |
| Mask                      | `mask()`               | `[]&lt;-`                 |
| Resample                  | `projectRaster()`      | `st_warp()`            |
| Rasterize                 | `rasterize()`          | `st_rasterize()`       |
| Stack                     | `stack()` or `brick()` | `c(along=...)`         |
| Apply functions on stacks | `calc()`               | `st_apply()`           |


&lt;svg viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;"&gt;  [ comment ]  &lt;path d="M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 110c23.196 0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627 0 12 5.373 12 12v100h12c6.627 0 12 5.373 12 12v24z"&gt;&lt;/path&gt;&lt;/svg&gt; https://r-spatial.github.io/stars/articles/stars6.html


&lt;!-- exo? --&gt;







---

class: inverse, center, middle

# &lt;svg viewBox="0 0 576 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;"&gt;  [ comment ]  &lt;path d="M560.02 32c-1.96 0-3.98.37-5.96 1.16L384.01 96H384L212 35.28A64.252 64.252 0 0 0 191.76 32c-6.69 0-13.37 1.05-19.81 3.14L20.12 87.95A32.006 32.006 0 0 0 0 117.66v346.32C0 473.17 7.53 480 15.99 480c1.96 0 3.97-.37 5.96-1.16L192 416l172 60.71a63.98 63.98 0 0 0 40.05.15l151.83-52.81A31.996 31.996 0 0 0 576 394.34V48.02c0-9.19-7.53-16.02-15.98-16.02zM224 90.42l128 45.19v285.97l-128-45.19V90.42zM48 418.05V129.07l128-44.53v286.2l-.64.23L48 418.05zm480-35.13l-128 44.53V141.26l.64-.24L528 93.95v288.97z"&gt;&lt;/path&gt;&lt;/svg&gt; Visualize

![:custom_hr]()

## Static visualization (~45min)



---
# &lt;svg viewBox="0 0 581 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;"&gt;  [ comment ]  &lt;path d="M581 226.6C581 119.1 450.9 32 290.5 32S0 119.1 0 226.6C0 322.4 103.3 402 239.4 418.1V480h99.1v-61.5c24.3-2.7 47.6-7.4 69.4-13.9L448 480h112l-67.4-113.7c54.5-35.4 88.4-84.9 88.4-139.7zm-466.8 14.5c0-73.5 98.9-133 220.8-133s211.9 40.7 211.9 133c0 50.1-26.5 85-70.3 106.4-2.4-1.6-4.7-2.9-6.4-3.7-10.2-5.2-27.8-10.5-27.8-10.5s86.6-6.4 86.6-92.7-90.6-87.9-90.6-87.9h-199V361c-74.1-21.5-125.2-67.1-125.2-119.9zm225.1 38.3v-55.6c57.8 0 87.8-6.8 87.8 27.3 0 36.5-38.2 28.3-87.8 28.3zm-.9 72.5H365c10.8 0 18.9 11.7 24 19.2-16.1 1.9-33 2.8-50.6 2.9v-22.1z"&gt;&lt;/path&gt;&lt;/svg&gt; packages for raster visualization

--

### Static

- [`tmap`](https://CRAN.R-project.org/package=tmap) &lt;svg viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;"&gt;  [ comment ]  &lt;path d="M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z"&gt;&lt;/path&gt;&lt;/svg&gt;
- [`ggplot2`](https://CRAN.R-project.org/package=ggplot2) 
    - &lt;svg viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;"&gt;  [ comment ]  &lt;path d="M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 110c23.196 0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627 0 12 5.373 12 12v100h12c6.627 0 12 5.373 12 12v24z"&gt;&lt;/path&gt;&lt;/svg&gt; https://r-spatial.github.io/stars/reference/geom_stars.html
    - &lt;svg viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;"&gt;  [ comment ]  &lt;path d="M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 110c23.196 0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627 0 12 5.373 12 12v100h12c6.627 0 12 5.373 12 12v24z"&gt;&lt;/path&gt;&lt;/svg&gt; https://ggplot2.tidyverse.org/reference/geom_tile.html
- [`ggmap`](https://CRAN.R-project.org/package=ggmap)
    - &lt;svg viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;"&gt;  [ comment ]  &lt;path d="M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 110c23.196 0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627 0 12 5.373 12 12v100h12c6.627 0 12 5.373 12 12v24z"&gt;&lt;/path&gt;&lt;/svg&gt; https://github.com/dkahle/ggmap
- [`rasterVis`](https://CRAN.R-project.org/package=rasterVis)
    - &lt;svg viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;"&gt;  [ comment ]  &lt;path d="M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 110c23.196 0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627 0 12 5.373 12 12v100h12c6.627 0 12 5.373 12 12v24z"&gt;&lt;/path&gt;&lt;/svg&gt; https://oscarperpinan.github.io/rastervis/

--

### Interactive 

- [`tmap`](https://CRAN.R-project.org/package=tmap) 
- [`leaflet`](https://CRAN.R-project.org/package=leaflet)
- [`mapview`](https://CRAN.R-project.org/package=mapview)

&lt;svg viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;"&gt;  [ comment ]  &lt;path d="M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 110c23.196 0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627 0 12 5.373 12 12v100h12c6.627 0 12 5.373 12 12v24z"&gt;&lt;/path&gt;&lt;/svg&gt; day 2 of the workshop.


---
# Using `plot()` and `image()` 

--

- `plot()` 
  - &lt;svg viewBox="0 0 448 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;"&gt;  [ comment ]  &lt;path d="M190.5 66.9l22.2-22.2c9.4-9.4 24.6-9.4 33.9 0L441 239c9.4 9.4 9.4 24.6 0 33.9L246.6 467.3c-9.4 9.4-24.6 9.4-33.9 0l-22.2-22.2c-9.5-9.5-9.3-25 .4-34.3L311.4 296H24c-13.3 0-24-10.7-24-24v-32c0-13.3 10.7-24 24-24h287.4L190.9 101.2c-9.8-9.3-10-24.8-.4-34.3z"&gt;&lt;/path&gt;&lt;/svg&gt; `?plot.stars`
  - &lt;svg viewBox="0 0 448 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;"&gt;  [ comment ]  &lt;path d="M190.5 66.9l22.2-22.2c9.4-9.4 24.6-9.4 33.9 0L441 239c9.4 9.4 9.4 24.6 0 33.9L246.6 467.3c-9.4 9.4-24.6 9.4-33.9 0l-22.2-22.2c-9.5-9.5-9.3-25 .4-34.3L311.4 296H24c-13.3 0-24-10.7-24-24v-32c0-13.3 10.7-24 24-24h287.4L190.9 101.2c-9.8-9.3-10-24.8-.4-34.3z"&gt;&lt;/path&gt;&lt;/svg&gt; `?raster::plot`

--

- `image()` 
  - &lt;svg viewBox="0 0 448 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;"&gt;  [ comment ]  &lt;path d="M190.5 66.9l22.2-22.2c9.4-9.4 24.6-9.4 33.9 0L441 239c9.4 9.4 9.4 24.6 0 33.9L246.6 467.3c-9.4 9.4-24.6 9.4-33.9 0l-22.2-22.2c-9.5-9.5-9.3-25 .4-34.3L311.4 296H24c-13.3 0-24-10.7-24-24v-32c0-13.3 10.7-24 24-24h287.4L190.9 101.2c-9.8-9.3-10-24.8-.4-34.3z"&gt;&lt;/path&gt;&lt;/svg&gt; `?image.stars`
  - &lt;svg viewBox="0 0 448 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;"&gt;  [ comment ]  &lt;path d="M190.5 66.9l22.2-22.2c9.4-9.4 24.6-9.4 33.9 0L441 239c9.4 9.4 9.4 24.6 0 33.9L246.6 467.3c-9.4 9.4-24.6 9.4-33.9 0l-22.2-22.2c-9.5-9.5-9.3-25 .4-34.3L311.4 296H24c-13.3 0-24-10.7-24-24v-32c0-13.3 10.7-24 24-24h287.4L190.9 101.2c-9.8-9.3-10-24.8-.4-34.3z"&gt;&lt;/path&gt;&lt;/svg&gt; `?raster::image`

--

- `par()` : margins, background color, ....



---
# Using `plot()` and `image()` 


```r
plot(ras)
```

&lt;img src="index_files/figure-html/plot0-1.png" style="display: block; margin: auto;" /&gt;


---
# Using `plot()` and `image()` 


```r
# breaks
bks &lt;- c(seq(-5000, 0, 1000), 250, 500, 750, 1000)
# cols 
cls &lt;- c("#c7cbce", "#687677", "#222d3d", "#25364a", "#172434", 
  "#ad6a11", "#e6a331", "#e4be29", "#f2ea8b")
```

---
# Using `plot()` and `image()` 


```r
par(las = 1, bg = "#f79c74", cex.axis = .7, mar = c(2, 2, 2, 4))
plot(ras,  breaks = bks, col = cls, main = "St-Lawrence map", axes = TRUE)
```

&lt;img src="index_files/figure-html/plot1-1.png" style="display: block; margin: auto;" /&gt;

---
# Using `plot()` and `image()` 


```r
par(las = 1, bg = "#f79c74", cex.axis = .7, mar = c(2, 2, 2, 4), oma = c(0, 2, 0 ,2))
plot(ras,  breaks = bks, col = cls, main = "St-Lawrence map", axes = TRUE)
```

&lt;img src="index_files/figure-html/plot1b-1.png" style="display: block; margin: auto;" /&gt;


---
# [`tmap`](https://CRAN.R-project.org/package=tmap)

.center[![:scale 74%](img/tmap.png)]

&lt;svg viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;"&gt;  [ comment ]  &lt;path d="M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 110c23.196 0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627 0 12 5.373 12 12v100h12c6.627 0 12 5.373 12 12v24z"&gt;&lt;/path&gt;&lt;/svg&gt; https://github.com/mtennekes/tmap


---
# [`tmap`](https://CRAN.R-project.org/package=tmap)


```r
library(tmap)
map0 &lt;- tm_shape(stl) + tm_borders(col = "red")
map0
```

&lt;img src="index_files/figure-html/tmap0-1.png" style="display: block; margin: auto;" /&gt;

---
# [`tmap`](https://CRAN.R-project.org/package=tmap)


```r
map1 &lt;- map0 + tm_compass(type = "8star", position = c("left", "top")) 
map1 
```

&lt;img src="index_files/figure-html/tmap1-1.png" style="display: block; margin: auto;" /&gt;

---
# [`tmap`](https://CRAN.R-project.org/package=tmap)


- works with [`raster`](https://CRAN.R-project.org/package=raster) and [`stars`](https://CRAN.R-project.org/package=stars) (the latter is recommended)

--

- let's focus on `stars`

```R
# create a stars object from a raster object
st_as_stars(rar)
```

---
# [`tmap`](https://CRAN.R-project.org/package=tmap)


```r
names(ras)
#&gt; [1] "bathy.tif"
map2 &lt;- tm_shape(ras) + tm_raster("bathy.tif")
```


---
# [`tmap`](https://CRAN.R-project.org/package=tmap)


```r
map3 &lt;- map2 + map1  # the order matters
map3
```

&lt;img src="index_files/figure-html/tmap3-1.png" style="display: block; margin: auto;" /&gt;


---
# [`tmap`](https://CRAN.R-project.org/package=tmap)


```r
map4 &lt;- map2 + map1 + tm_style("bw")
map4
```

&lt;img src="index_files/figure-html/tmap4-1.png" style="display: block; margin: auto;" /&gt;

---
# [`tmap`](https://CRAN.R-project.org/package=tmap)


```r
map5 &lt;- tm_shape(ras) + tm_raster("bathy.tif", breaks = c(seq(-5000,
    0, 1000), 250, 500, 750, 1000), palette = "viridis") 
map5 
```

&lt;img src="index_files/figure-html/tmap5-1.png" style="display: block; margin: auto;" /&gt;

---
# [`tmap`](https://CRAN.R-project.org/package=tmap)


- &lt;svg viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;"&gt;  [ comment ]  &lt;path d="M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 110c23.196 0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627 0 12 5.373 12 12v100h12c6.627 0 12 5.373 12 12v24z"&gt;&lt;/path&gt;&lt;/svg&gt; https://geocompr.robinlovelace.net/adv-map.html

- &lt;svg viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;"&gt;  [ comment ]  &lt;path d="M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 110c23.196 0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627 0 12 5.373 12 12v100h12c6.627 0 12 5.373 12 12v24z"&gt;&lt;/path&gt;&lt;/svg&gt; https://github.com/mtennekes/tmap

- &lt;svg viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;"&gt;  [ comment ]  &lt;path d="M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 110c23.196 0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627 0 12 5.373 12 12v100h12c6.627 0 12 5.373 12 12v24z"&gt;&lt;/path&gt;&lt;/svg&gt; https://www.rdocumentation.org/packages/tmap/versions/3.2/topics/tm_layout

---
# &lt;svg viewBox="0 0 576 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;"&gt;  [ comment ]  &lt;path d="M528.1 171.5L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6zM388.6 312.3l23.7 138.4L288 385.4l-124.3 65.3 23.7-138.4-100.6-98 139-20.2 62.2-126 62.2 126 139 20.2-100.6 98z"&gt;&lt;/path&gt;&lt;/svg&gt; &lt;svg viewBox="0 0 576 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;"&gt;  [ comment ]  &lt;path d="M528.1 171.5L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6zM388.6 312.3l23.7 138.4L288 385.4l-124.3 65.3 23.7-138.4-100.6-98 139-20.2 62.2-126 62.2 126 139 20.2-100.6 98z"&gt;&lt;/path&gt;&lt;/svg&gt; Reproduce this map

&lt;img src="index_files/figure-html/tmap_exo-1.png" style="display: block; margin: auto;" /&gt;

---
# Solution 



---
# Solution 



---

# Resources &lt;svg viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;"&gt;  [ comment ]  &lt;path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"&gt;&lt;/path&gt;&lt;/svg&gt;

- [Geocomputation with R](https://geocompr.robinlovelace.net/)
- [Spatial Data Science](https://keen-swartz-3146c4.netlify.app/)
- [Blog R-spatial](https://www.r-spatial.org/)
- [Open Geospatial Consortium](https://www.ogc.org/)
- https://nowosad.github.io/BioGIS_19/workshop/#64
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script src="macros.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "dracula",
"countIncrementalSlides": false
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
